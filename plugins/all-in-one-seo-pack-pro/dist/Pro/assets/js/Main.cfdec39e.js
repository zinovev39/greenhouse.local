import{J as x,D as pt,j as W,c as ct}from"./links.574d4fd4.js";import{a as B}from"./addons.f4a19c9a.js";import{R as ht,a as gt}from"./RequiresUpdate.a051f07b.js";import{C as mt}from"./Index.8d21a760.js";import{a as _t}from"./Header.30576576.js";import{n as Q}from"./numbers.c7cb4085.js";import{C as F,W as M}from"./Table.62305440.js";import{P as V}from"./PostTypes.797a4244.js";import{D as X}from"./Date.873f9fff.js";import{C as Z}from"./Tooltip.72f8a160.js";import{L as N,a as kt,b as tt,c as st,d as et,e as nt,f as it,S as ot}from"./Index.1914312f.js";import{S as ft,d as bt,C as St}from"./index.b1bbc091.js";import{x as o,o as d,c as I,k as _,l,a as n,t as r,D as b,C as p,I as C,H as D,q,b as f,j as Pt,F as vt,L as yt}from"./vue.runtime.esm-bundler.78401fbe.js";import{_ as L}from"./_plugin-vue_export-helper.58be9317.js";import{a as at}from"./Caret.89e18339.js";import{a as O,S as U,b as K,c as E}from"./Affiliate.fdeb2d7c.js";import{C as rt}from"./Tabs.d491c719.js";import{S as z}from"./Suggestion.db3b227b.js";import{S as lt}from"./Refresh.e1116bb6.js";import wt from"./Overview.23e2c674.js";import{J as It}from"./JsonValues.870a4901.js";import{B as At}from"./Checkbox.66c1e532.js";import{B as Tt}from"./Textarea.bb6037a0.js";import{C as Rt}from"./Card.e9a25031.js";import{C as xt}from"./ExcludePosts.f3ac1bde.js";import{B as Lt}from"./HighlightToggle.6d3cc7d8.js";import{G as $t,a as Ct}from"./Row.e7795c3e.js";import{C as Dt}from"./PostTypeOptions.ab839663.js";import{C as Mt}from"./SettingsRow.3c16cab0.js";import"./default-i18n.3881921e.js";import"./isArrayLikeObject.59b68b05.js";import"./upperFirst.1bce92c5.js";import"./_stringToArray.4de3b1f3.js";import"./toString.03aff7e6.js";import"./RequiresUpdate.488ddbed.js";import"./license.3fbd013a.js";import"./allowed.59f3c72a.js";import"./deburr.f9ffc34a.js";/* empty css             */import"./params.f0608262.js";import"./Ellipse.c78f1911.js";import"./LicenseKeyBar.35d676b3.js";import"./LogoGear.d631c62c.js";import"./Logo.9906182f.js";import"./Support.11807ed2.js";import"./Url.e3c0d5de.js";import"./Exclamation.20b286fc.js";import"./Gear.da11b8f1.js";import"./Slide.6b2090d0.js";import"./ScrollAndHighlight.8f79e59a.js";import"./AnimatedNumber.7d89d6e0.js";import"./constants.7045f08f.js";import"./regex.ebd490ab.js";import"./Index.815fe32c.js";import"./Editor.df2359d9.js";import"./tags.58b8cbee.js";import"./Plus.cdfc8876.js";import"./TruSeoScore.b474bf15.js";import"./Information.8541dc5f.js";import"./AddonConditions.9aacd850.js";import"./Index.b732d651.js";import"./Blur.7f36813b.js";import"./DonutChartWithLegend.c89e3c1b.js";import"./SeoSiteScore.f2154b15.js";import"./Row.4e745639.js";import"./RequiredPlans.6ee9b196.js";import"./Checkmark.68b20c77.js";import"./AddPlus.fbd651a1.js";import"./External.f8ff7aa4.js";import"./Radio.76a0cae5.js";const Bt={setup(){return{linkAssistantStore:x()}},emits:["updated"],components:{CoreTooltip:Z,CoreWpTable:F,LinkAssistantConfirmationModal:N,LinkAssistantEditablePhrase:kt,SvgTrash:ft},mixins:[V,M,X],props:{domain:{type:String,required:!0},rows:{type:Array,required:!0},activeDomain:{type:Number}},data(){return{tableIdPrefix:"aioseo-domains-report-inner-",resultsPerPage:5,wpTableKey:0,activePost:-1,showModal:!1,action:"",selectedRows:null,bulkOptions:[{label:this.$t.__("Delete",this.$tdPro),value:"delete"}],strings:{delete:this.$t.__("Delete",this.$tdPro)},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete these links for this domain?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to delete these links for this domain?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to delete all links for this domain?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesAll:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{tableId(){return this.tableIdPrefix+pt.now().toFormat("x")},columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"phrases",label:this.$t.__("Phrases with Links",this.$tdPro)},{slug:"publish_date",label:this.$t.__("Publish Date",this.$tdPro),width:"160px"},{slug:"delete",width:"50px"}]},shouldShowPagination(){return 1<this.rows[0].totals.pages},initialPageNumber(){if(this.linkAssistantStore.domainsReport.innerPagination===void 0||this.linkAssistantStore.domainsReport.innerPagination[this.domain]===void 0)return 1;const t=this.linkAssistantStore.domainsReport.innerPagination[this.domain];return t||1}},methods:{fetchData(t){return this.linkAssistantStore.setDomainsReportInnerPaginatedPage({domain:this.domain,page:this.pageNumber}),this.linkAssistantStore.fetchDomainsReportInner({...t,additionalFilters:{domainIndex:this.activeDomain,domain:this.domain}}).finally(()=>{this.wpTableKey++,this.$emit("updated")})},toggleShowMorePhrases(t){if(this.activePost===t){this.activePost=-1;return}this.activePost=t},deleteLink({postIndex:t,linkIndex:e}){this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerLinkDelete({searchTerm:this.searchTerm,rows:this.rows,postIndex:t,linkIndex:e,offset:this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage}).finally(()=>{this.refreshTable().then(()=>{this.$emit("updated"),this.wpTableLoading=!1})})},saveModifiedPhrase(t){if(!this.linkAssistantStore.domainsReport.rows[this.activeDomain])return;const e=Object.keys(this.linkAssistantStore.domainsReport.rows[this.activeDomain])[0];!e||!this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex]||!this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex]||this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase_html!==t.phraseHtml&&(this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase=t.phrase,this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase_html=t.phraseHtml,this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].anchor=t.anchor,this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerLinkUpdate({domain:e,link:this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex]}).then(this.refreshTable).then(()=>{this.wpTableKey++,this.$emit("updated")}).finally(()=>{this.wpTableLoading=!1}))},maybeDoBulkAction({action:t,selectedRows:e}){!t||!e.length||(this.action=t,this.selectedRows=e,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,this.action==="delete")return this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerBulk({searchTerm:this.searchTerm,action:this.action,domainIndex:this.activeDomain,linkIndexes:this.selectedRows,offset:this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage}).finally(()=>{this.refreshTable().then(()=>{this.$emit("updated"),this.wpTableLoading=!1})})}},created(){this.pageNumber=this.initialPageNumber}},Ot={class:"domains-report-inner"},Ft=["href"],Vt={class:"row-actions"},Nt={class:"view"},qt=["href"],Ut={class:"edit"},Kt=["href"],Et={class:"date"};function zt(t,e,u,a,s,i){const v=o("link-assistant-editable-phrase"),A=o("svg-trash"),S=o("core-tooltip"),T=o("core-wp-table"),P=o("link-assistant-confirmation-modal");return d(),I("div",Ot,[(d(),_(T,{class:"link-assistant-inner-table","bulk-options":s.bulkOptions,columns:i.columns,id:i.tableId,"initial-page-number":t.pageNumber,key:s.wpTableKey,loading:t.wpTableLoading,rows:u.rows,"show-pagination":i.shouldShowPagination,"show-search":!1,"show-table-footer":!1,totals:u.rows[0].totals,onPaginate:t.processPagination,onProcessBulkAction:i.maybeDoBulkAction},{post_title:l(({row:m})=>[n("strong",null,[n("a",{class:"edit-link",href:m.context.permalink,target:"_blank"},r(m.context.postTitle),9,Ft)]),n("div",Vt,[n("span",Nt,[n("a",{href:m.context.permalink,target:"_blank"},r(t.viewPost(m.context.postType.singular)),9,qt),b(" | ")]),n("span",Ut,[n("a",{href:m.context.editLink,target:"_blank"},r(t.editPost(m.context.postType.singular)),9,Kt)])])]),phrases:l(({row:m,index:g})=>[p(v,{row:m,rowIndex:g,activeRow:s.activePost,domainsReport:"",onDelete:i.deleteLink,onToggleShowMorePhrases:i.toggleShowMorePhrases,onSaveModifiedPhrase:i.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","onDelete","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),publish_date:l(({row:m})=>[n("span",Et,r(t.dateSqlToLocal(m.context.publishDate,"MMMM d, yyyy")),1)]),delete:l(({index:m})=>[p(S,{type:"action"},{tooltip:l(()=>[b(r(s.strings.delete),1)]),default:l(()=>[p(A,{onClick:g=>i.maybeDoBulkAction({action:"delete",selectedRows:[m]})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","columns","id","initial-page-number","loading","rows","show-pagination","totals","onPaginate","onProcessBulkAction"])),p(P,{show:s.showModal,strings:s.modalStrings,selectedRows:s.selectedRows,onDoBulkAction:i.doBulkAction,onCloseModal:e[0]||(e[0]=m=>s.showModal=!1)},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const Ht=L(Bt,[["render",zt]]);const Yt={setup(){const t=x();return{linkAssistantStore:t,settingsStore:W(),fetchData:t.fetchDomainsReport}},mixins:[M],components:{CoreWpTable:F,DomainsReportInner:Ht,LinkAssistantConfirmationModal:N,SvgCaret:at,SvgFile:bt,SvgLinkExternal:O},beforeMount(){this.$route.query&&(this.$route.query.hostname&&(this.searchTerm=this.$route.query.hostname,this.processSearch(this.$route.query.hostname)),this.$route.query.fullReport&&(this.searchTerm="",this.processPagination(1)))},data(){return{numbers:Q,tableId:"aioseo-link-assistant-domains-report-wp-table",changeItemsPerPageSlug:"linkAssistantDomainsReport",innerTableKey:0,activeRow:-1,showModal:!1,selectedRows:null,action:null,bulkOptions:[{label:this.$t.__("Delete",this.$tdPro),value:"delete"}],strings:{view:this.$t.__("View",this.$tdPro),deleteAllLinks:this.$t.__("Delete All Links",this.$tdPro)},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete all links for this domain?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to delete all links for these domains?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to delete all links for all domains?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete this link",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesAll:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{columns(){return[{slug:"domain",label:this.$t.__("Domain",this.$tdPro)},{slug:"posts",label:this.$t.__("Posts",this.$tdPro),width:"90px"},{slug:"links",label:this.$t.__("Links",this.$tdPro),width:"90px"},{slug:"toggle-button",label:"",width:"60px"}]}},methods:{postCount(t){const e=Object.keys(t)[0];return t[e][0].totals.total},linkCount(t){const e=Object.keys(t)[0];return t[e][0].totals.totalLinks},isRowActive(t){return t===this.activeRow},toggleRow(t){if(this.activeRow===t){this.activeRow=-1;return}this.activeRow=t},maybeDoBulkAction({action:t,selectedRows:e}){e===!1||!t||(this.action=t,this.selectedRows=e,this.showModal=!0)},doBulkAction(){return this.showModal=!1,this.wpTableLoading=!0,this.linkAssistantStore.domainsReportBulk({action:this.action,searchTerm:this.searchTerm,rowIndexes:this.selectedRows}).then(this.processFetchTableData).finally(()=>{this.activeRow=-1,this.wpTableLoading=!1,this.wpTableKey++})},getInnerDomain(t){return Object.keys(t)[0]},getInnerDomainRows(t){return t[this.getInnerDomain(t)]},doProcessPagination(t){this.processPagination(t),this.activeRow=-1},doProcessSearch(t){this.processSearch(t),this.activeRow=-1}}},jt={class:"aioseo-link-assistant-domains-report"},Gt={class:"domain-name"},Jt=["onClick"],Wt=["src"],Qt={class:"row-actions"},Xt=["href"],Zt=["onClick"],ts=["onClick"];function ss(t,e,u,a,s,i){const v=o("svg-file"),A=o("svg-link-external"),S=o("svg-caret"),T=o("domains-report-inner"),P=o("core-wp-table"),m=o("link-assistant-confirmation-modal");return d(),I("div",jt,[(d(),_(P,{ref:"table","bulk-options":s.bulkOptions,columns:i.columns,id:s.tableId,"initial-items-per-page":a.settingsStore.settings.tablePagination.linkAssistantDomainsReport,"initial-page-number":t.pageNumber,"initial-search-term":t.searchTerm,key:t.wpTableKey,loading:t.wpTableLoading,rows:a.linkAssistantStore.domainsReport.rows,totals:a.linkAssistantStore.domainsReport.totals,"show-items-per-page":"",onPaginate:i.doProcessPagination,onProcessBulkAction:i.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage,onSearch:i.doProcessSearch,onSortColumn:t.processSort},{domain:l(({row:g,index:y,editRow:c})=>[n("div",Gt,[n("a",{href:"#",class:C({active:i.isRowActive(y)}),onClick:D(w=>{c(y),i.toggleRow(y)},["prevent"])},[n("img",{alt:"Domain Favicon",class:"favicon",src:`https://www.google.com/s2/favicons?sz=32&domain=${Object.keys(g)[0]}`},null,8,Wt),n("span",null,r(Object.keys(g)[0]),1)],10,Jt)]),n("div",Qt,[n("span",null,[n("a",{class:"view",href:"https://"+Object.keys(g)[0],target:"_blank"},[n("span",null,r(s.strings.view),1)],8,Xt),b(" | ")]),n("span",null,[n("a",{class:"delete-all-links",href:"#",onClick:D(w=>i.maybeDoBulkAction({action:"delete",selectedRows:y}),["prevent"])},[n("span",null,r(s.strings.deleteAllLinks),1)],8,Zt)])])]),posts:l(({row:g})=>[n("div",null,[p(v),n("span",null,r(s.numbers.numberFormat(i.postCount(g))),1)])]),links:l(({row:g})=>[n("div",null,[p(A),n("span",null,r(s.numbers.numberFormat(i.linkCount(g))),1)])]),"toggle-button":l(({index:g,editRow:y})=>[n("button",{class:C(["toggle-row-button",{active:i.isRowActive(g)}]),onClick:c=>{y(g),i.toggleRow(g)}},[p(S)],10,ts)]),"edit-row":l(({row:g})=>[(d(),_(T,{key:s.innerTableKey,domain:i.getInnerDomain(g),rows:i.getInnerDomainRows(g),activeDomain:s.activeRow,onUpdated:e[0]||(e[0]=y=>s.innerTableKey++)},null,8,["domain","rows","activeDomain"]))]),_:1},8,["bulk-options","columns","id","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage","onSearch","onSortColumn"])),p(m,{show:s.showModal,strings:s.modalStrings,selectedRows:s.selectedRows,onDoBulkAction:i.doBulkAction,onCloseModal:e[1]||(e[1]=g=>s.showModal=!1)},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const es=L(Yt,[["render",ss]]),dt={emits:["updatingLinks"],computed:{isPrioritizedPost(){let e=x().linksReport.prioritizedPosts;return Array.isArray(e)&&(e=e.map(Number)),e.includes(parseInt(this.post.ID))}},methods:{doRefresh(){this.refreshLoading=!0,window.aioseoBus.$emit("updatingLinks",!0),x().linksRefresh({postIndex:this.postIndex,postId:this.post.ID,linksReport:!0}).finally(()=>{this.refreshLoading=!1,window.aioseoBus.$emit("updatingLinks",!1),this.refreshTable()})}}};const ns={setup(){return{linkAssistantStore:x()}},emits:["updatingLinks"],components:{CoreMainTabs:rt,LinkAssistantAffiliate:tt,LinkAssistantExternal:st,LinkAssistantInboundInternal:et,LinkAssistantOutboundInternal:nt,LinkAssistantSuggestions:it,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z,SvgRefresh:lt},mixins:[ot,dt,M],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!0},postId:{type:Number,required:!0},initialActiveTab:String},data(){return{tabsKey:0,activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",refreshLoading:!1,strings:{refresh:this.$t.__("Refresh",this.$tdPro)}}},computed:{tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].inboundInternal,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].outboundInternal,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].affiliate,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].external,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsOutbound+this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsInbound,this.$t.__("Link Suggestions",this.$tdPro))}]}},methods:{fetchData(t){window.aioseoBus.$emit("updatingLinks",!0);const e={...t,additionalFilters:{postId:this.post.ID,postIndex:this.postIndex,type:this.suggestionType}};return this.linkAssistantStore.fetchLinksReportInner(e).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},processChangeTab(t,e){this.activeTab=t,e&&(this.activeSuggestionTab=e)}},mounted(){this.initialActiveTab&&this.$nextTick(()=>{this.processChangeTab(this.initialActiveTab)})}},is={class:"links-report-inner"};function os(t,e,u,a,s,i){const v=o("svg-refresh"),A=o("base-button"),S=o("core-main-tabs"),T=o("link-assistant-outbound-internal"),P=o("link-assistant-inbound-internal"),m=o("link-assistant-affiliate"),g=o("link-assistant-external"),y=o("link-assistant-suggestions");return d(),I("div",is,[(d(),_(S,{class:"link-tabs",internal:"",key:s.tabsKey,tabs:i.tabs,active:s.activeTab,onChanged:e[0]||(e[0]=c=>i.processChangeTab(c))},{"var-tab-icon":l(({tab:c})=>[(d(),_(q(c.icon),{class:C([{warning:c.warning}])},null,8,["class"]))]),button:l(()=>[p(A,{class:"button-refresh",type:"gray",size:"medium",loading:s.refreshLoading,disabled:t.isPrioritizedPost,onClick:t.doRefresh},{default:l(()=>[p(v),b(" "+r(s.strings.refresh),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},8,["tabs","active"])),s.activeTab==="outbound-internal"?(d(),_(T,{key:0,post:u.post,postIndex:u.postIndex,postId:u.postId,linksReport:"",onOpenSuggestions:e[1]||(e[1]=c=>i.processChangeTab("link-suggestions","suggestions-outbound")),onLinksUpdated:e[2]||(e[2]=c=>s.tabsKey++)},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="inbound-internal"?(d(),_(P,{key:1,post:u.post,postIndex:u.postIndex,postId:u.postId,linksReport:"",onOpenSuggestions:e[3]||(e[3]=c=>i.processChangeTab("link-suggestions","suggestions-inbound")),onLinksUpdated:e[4]||(e[4]=c=>s.tabsKey++)},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="affiliate"?(d(),_(m,{key:2,post:u.post,postIndex:u.postIndex,postId:u.postId,onLinksUpdated:e[5]||(e[5]=c=>s.tabsKey++),linksReport:""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="external"?(d(),_(g,{key:3,post:u.post,postIndex:u.postIndex,postId:u.postId,onLinksUpdated:e[6]||(e[6]=c=>s.tabsKey++),linksReport:""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="link-suggestions"?(d(),_(y,{key:4,post:u.post,postIndex:u.postIndex,postId:u.postId,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(u.post),initialTab:s.activeSuggestionTab,linksReport:"",onShowStandalone:e[7]||(e[7]=c=>t.showStandalone=!0),onSuggestionsTabChanged:e[8]||(e[8]=c=>s.activeSuggestionTab=c),onLinksUpdated:e[9]||(e[9]=c=>s.tabsKey++)},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","initialTab"])):f("",!0)])}const as=L(ns,[["render",os]]);const rs={setup(){const t=x(),e=W();return{linkAssistantStore:t,settingsStore:e,fetchData:t.fetchLinksReport}},mixins:[V,M,X],components:{CoreTooltip:Z,CoreWpTable:F,LinkAssistantConfirmationModal:N,LinksReportInner:as,SvgCaret:at,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z},data(){return{numbers:Q,tableId:"aioseo-link-assistant-links-report-wp-table",changeItemsPerPageSlug:"linkAssistantLinksReport",initialActiveTab:"inbound-internal",innerTableKey:0,activeRow:-1,showModal:!1,selectedRows:null,bulkAction:null,selectedFilters:{},additionalFilters:null,strings:{deleteAllLinks:this.$t.__("Delete All Links",this.$tdPro),inboundInternal:this.$t.sprintf(this.$t.__("%1$sInbound Internal Links%2$sLinks from other posts to this post",this.$tdPro),"<strong>","</strong><br />"),outboundInternal:this.$t.sprintf(this.$t.__("%1$sOutbound Internal Links%2$sLinks from this post to other posts",this.$tdPro),"<strong>","</strong><br />")},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete all links for this post?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro),width:"100%"},{slug:"publish_date",label:this.$t.__("Publish Date",this.$tdPro),width:"170px"},{slug:"internal",label:this.$t.__("Internal",this.$tdPro),width:"150px"},{slug:"affiliate",label:this.$t.__("Affiliate",this.$tdPro),width:"90px"},{slug:"external",label:this.$t.__("External",this.$tdPro),width:"90px"},{slug:"suggestions",label:this.$t.__("Suggestions",this.$tdPro),width:"110px"},{slug:"toggle-button",label:"",width:"60px"}]}},methods:{getPostId(t){return parseInt(t)},isRowActive(t){return t===this.activeRow},maybeEditRow(t,e,u,a){if(!u){this.initialActiveTab=t,e(a),this.toggleRow(a);return}if(this.initialActiveTab===t){e(a),this.toggleRow(a);return}this.initialActiveTab=t,this.innerTableKey++},toggleRow(t){if(this.activeRow===t){this.activeRow=-1;return}this.activeRow=t},maybeDeleteAllLinks(t){t!==!1&&(this.selectedRows=t,this.showModal=!0)},deleteAllLinks(){this.showModal=!1;const t=this.linkAssistantStore.linksReport.rows[this.selectedRows].ID;if(t)return this.wpTableLoading=!0,this.linkAssistantStore.linksReportDeleteAll({postId:t}).finally(()=>{this.activeRow=-1,this.wpTableKey++,this.refreshTable()})},processAdditionalFilterOptionSelected({name:t,selectedValue:e}){t==="post-type"&&(this.selectedFilters["post-type"]=e,this.selectedFilters.term="all"),this.additionalFilters=this.linkAssistantStore.linksReport.additionalFilters.filter(u=>u.name==="post-type"||u.dependsOn&&this.selectedFilters["post-type"]===u.dependsOn.value)},resetSelectedFilters(){this.selectedFilters.term="all",this.selectedFilters["post-type"]="",this.processAdditionalFilterOptionSelected({name:"post-type",selectedValue:""})},doProcessPagination(t){this.processPagination(t),this.activeRow=-1},doProcessSearch(t){this.processSearch(t),this.activeRow=-1},doProcessFilterTable(t){this.processFilterTable(t),this.activeRow=-1},doProcessAdditionalFilters(t){this.processAdditionalFilters(t),this.activeRow=-1}},beforeMount(){this.additionalFilters=this.linkAssistantStore.linksReport.additionalFilters.filter(t=>t.name==="post-type"||t.dependsOn&&this.selectedFilters["post-type"]===t.dependsOn.value),this.$route.query&&(Object.entries(this.$route.query).forEach(t=>{switch(t[0]){case"fullReport":this.processFilterTable({slug:"all"});break;case"postTitle":this.searchTerm=this.$route.query.postTitle,this.processSearch(this.searchTerm);break;case"linkingOpportunities":this.processFilterTable({slug:"linking-opportunities"});break;case"orphaned-posts":this.processFilterTable({slug:"orphaned-posts"});break}}),this.linkAssistantStore.setLinksReportCounts())}},ls={class:"aioseo-link-assistant-links-report"},ds={class:"post-title"},us=["onClick"],ps={key:0,class:"post-status-badge draft"},cs={key:1,class:"post-status-badges"},hs={class:"post-status-badge future"},gs={class:"post-status-badge future"},ms={class:"row-actions"},_s=["href"],ks=["href"],fs=["onClick"],bs={key:0,class:"date"},Ss={class:"internal-links-count"},Ps=["onClick"],vs={class:"aioseo-tooltip-wrapper"},ys=["innerHTML"],ws=["onClick"],Is={class:"aioseo-tooltip-wrapper"},As=["innerHTML"],Ts=["onClick"],Rs=["onClick"],xs=["onClick"],Ls=["onClick"];function $s(t,e,u,a,s,i){const v=o("svg-link-internal-inbound"),A=o("core-tooltip"),S=o("svg-link-internal-outbound"),T=o("svg-link-suggestion"),P=o("svg-link-affiliate"),m=o("svg-link-external"),g=o("svg-caret"),y=o("LinksReportInner"),c=o("core-wp-table"),w=o("link-assistant-confirmation-modal");return d(),I("div",ls,[(d(),_(c,{ref:"table",class:"posts-table",id:s.tableId,"additional-filters":s.additionalFilters,columns:i.columns,filters:a.linkAssistantStore.linksReport.filters,"initial-items-per-page":a.settingsStore.settings.tablePagination.linkAssistantLinksReport,"initial-page-number":t.pageNumber,"initial-search-term":t.searchTerm,key:t.wpTableKey,loading:t.wpTableLoading,rows:a.linkAssistantStore.linksReport.rows,"selected-filters":s.selectedFilters,"show-bulk-actions":!1,totals:a.linkAssistantStore.linksReport.totals,"show-items-per-page":"",onAdditionalFilterOptionSelected:i.processAdditionalFilterOptionSelected,onFilterTable:i.doProcessFilterTable,onPaginate:i.doProcessPagination,onProcessAdditionalFilters:i.doProcessAdditionalFilters,onProcessChangeItemsPerPage:t.processChangeItemsPerPage,onSearch:i.doProcessSearch,onSortColumn:t.processSort},{post_title:l(({row:h,index:k,editRow:R})=>{var $,H,Y,j,G,J;return[n("div",ds,[n("a",{href:"#",class:C({active:i.isRowActive(k)}),onClick:D(ut=>{R(k),i.toggleRow(k)},["prevent"])},[n("span",null,r(h.context.postTitle),1),["draft","private","pending"].includes(h.post_status)?(d(),I("span",ps,r((Y=(H=($=h.context)==null?void 0:$.postStatus)==null?void 0:H.label)==null?void 0:Y.toUpperCase()),1)):f("",!0),h.post_status==="future"?(d(),I("span",cs,[n("span",hs,r((J=(G=(j=h.context)==null?void 0:j.postStatus)==null?void 0:G.label)==null?void 0:J.toUpperCase()),1),n("span",gs,r(t.dateSqlToLocal(h.post_date,"MMMM d, yyyy").toUpperCase()),1)])):f("",!0)],10,us)]),n("div",ms,[n("span",null,[n("a",{class:"view",href:h.context.permalink,target:"_blank"},[n("span",null,r(t.viewPost(h.context.postType.singular)),1)],8,_s),b(" | ")]),n("span",null,[n("a",{class:"edit",href:h.context.editLink,target:"_blank"},[n("span",null,r(t.editPost(h.context.postType.singular)),1)],8,ks),b(" | ")]),n("span",null,[n("a",{class:"delete-all-links",href:"#",onClick:D(ut=>i.maybeDeleteAllLinks(k),["prevent"])},[n("span",null,r(s.strings.deleteAllLinks),1)],8,fs)])])]}),publish_date:l(({row:h})=>[h.post_status==="publish"?(d(),I("span",bs,r(t.dateSqlToLocal(h.post_date,"MMMM d, yyyy")),1)):f("",!0)]),internal:l(({editRow:h,index:k,editRowActive:R})=>[n("div",Ss,[n("div",{onClick:$=>i.maybeEditRow("inbound-internal",h,R,k)},[n("div",vs,[p(A,{class:"action"},{tooltip:l(()=>[n("span",{innerHTML:s.strings.inboundInternal},null,8,ys)]),default:l(()=>[p(v),n("span",null,r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].inboundInternal)),1)]),_:2},1024)])],8,Ps),n("div",{onClick:$=>i.maybeEditRow("outbound-internal",h,R,k)},[n("div",Is,[p(A,{class:"action"},{tooltip:l(()=>[n("span",{innerHTML:s.strings.outboundInternal},null,8,As)]),default:l(()=>[p(S),n("span",null,r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].outboundInternal)),1)]),_:2},1024)])],8,ws)])]),suggestions:l(({editRow:h,index:k,editRowActive:R})=>[n("div",{onClick:$=>i.maybeEditRow("link-suggestions",h,R,k)},[p(T),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].suggestionsInbound+a.linkAssistantStore.linksReport.counts[k].suggestionsOutbound)),1)],8,Ts)]),affiliate:l(({editRow:h,index:k,editRowActive:R})=>[n("div",{onClick:$=>i.maybeEditRow("affiliate",h,R,k)},[p(P),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].affiliate)),1)],8,Rs)]),external:l(({editRow:h,index:k,editRowActive:R})=>[n("div",{onClick:$=>i.maybeEditRow("external",h,R,k)},[p(m),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].external)),1)],8,xs)]),"toggle-button":l(({index:h,editRow:k})=>[n("button",{class:C(["toggle-row-button",{active:i.isRowActive(h)}]),onClick:R=>{k(h),i.toggleRow(h)}},[p(g)],10,Ls)]),"edit-row":l(({row:h,index:k})=>[(d(),_(y,{key:s.innerTableKey,post:h,postIndex:k,postId:i.getPostId(h.ID),initialActiveTab:s.initialActiveTab},null,8,["post","postIndex","postId","initialActiveTab"]))]),_:1},8,["id","additional-filters","columns","filters","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","selected-filters","totals","onAdditionalFilterOptionSelected","onFilterTable","onPaginate","onProcessAdditionalFilters","onProcessChangeItemsPerPage","onSearch","onSortColumn"])),p(w,{show:s.showModal,selectedRows:s.selectedRows,strings:s.modalStrings,onDoBulkAction:i.deleteAllLinks,onCloseModal:e[0]||(e[0]=h=>s.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const Cs=L(rs,[["render",$s]]);const Ds={setup(){const t=x();return{linkAssistantStore:t,fetchData:t.fetchPostReport}},emits:["updatingLinks"],components:{CoreMainTabs:rt,LinkAssistantAffiliate:tt,LinkAssistantExternal:st,LinkAssistantInboundInternal:et,LinkAssistantOutboundInternal:nt,LinkAssistantSuggestions:it,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z,SvgRefresh:lt},mixins:[V,ot,dt,M],data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",postId:null,postIndex:0,post:{},activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",refreshLoading:!1,loadTime:4,showLoadingBar:!1,loadingInitialData:!1,strings:{backToLinksReport:this.$t.__("Back to Links Report",this.$tdPro),loadingHeader:this.$t.__("Loading Link Suggestions. Please wait...",this.$tdPro),refresh:this.$t.__("Refresh",this.$tdPro)}}},computed:{getPost(){return{...this.post,links:this.linkAssistantStore.postReport}},header(){return this.$t.sprintf(this.$t.__('Internal Links & Suggestions for "%1$s"',this.$tdPro),this.post.context.postTitle)},tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.post.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.post.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.post.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.post.links.external.totals.total,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.post.links.suggestionsOutbound.totals.total+this.post.links.suggestionsInbound.totals.total,this.$t.__("Link Suggestions",this.$tdPro))}]}},methods:{closePostReport(){this.$router.push({name:"links-report"})},processChangeTab(t,e){this.activeTab=t,e&&(this.activeSuggestionTab=e)},doRefresh(){this.refreshLoading=!0,window.aioseoBus.$emit("updatingLinks",!0),this.linkAssistantStore.linksRefresh({postIndex:this.postIndex,postId:this.post.ID,postReport:!0}).finally(()=>{this.refreshLoading=!1,window.aioseoBus.$emit("updatingLinks",!1),this.refreshTable()})},checkProgress(){this.showLoadingBar=!1,this.loadingInitialData&&this.$nextTick(()=>{this.showLoadingBar=!0,2>this.loadTime&&(this.loadTime=4),this.loadTime=this.loadTime/2,setTimeout(this.checkProgress,this.loadTime*1e3)})}},beforeMount(){if(this.$route.query){if(!this.$route.query.postId){this.$router.push({name:"links-report"});return}this.postId=parseInt(this.$route.query.postId),this.postIndex=parseInt(this.$route.query.postIndex),this.activeTab=this.$route.query.initialTab,this.activeSuggestionTab=this.$route.query.initialSuggestionTab,this.post={ID:this.postId,context:{postType:{singular:null}},links:{...this.linkAssistantStore.postReport}}}},mounted(){this.linkAssistantStore.resetPostReportState(),window.aioseoBus.$emit("updatingLinks",!0),this.showLoadingBar=!0,this.loadingInitialData=!0,setTimeout(this.checkProgress,this.loadTime*1e3),this.filter="all",this.processFetchTableData({postId:this.postId}).then(t=>{t.body.links&&(this.post.links=t.body.links),t.body.context&&(this.post.context=t.body.context),this.linkAssistantStore.postReport={...t.body.links}}).catch(t=>{console.error(t),this.$router.push({name:"links-report"})}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.showLoadingBar=!1,this.loadingInitialData=!1})}},Ms={class:"aioseo-link-assistant-post-report"},Bs={key:0,class:"header-container"},Os={class:"first-row"},Fs={class:"second-row"},Vs={class:"first-column"},Ns={class:"header"},qs={key:1,class:"load-progress"},Us={key:2,class:"header-container"},Ks={class:"first-row"},Es={class:"second-row"},zs={class:"first-column"},Hs={class:"header"},Ys={class:"actions"},js=["href"],Gs=["href"],Js={class:"second-column"};function Ws(t,e,u,a,s,i){const v=o("svg-refresh"),A=o("base-button"),S=o("core-main-tabs"),T=o("link-assistant-outbound-internal"),P=o("link-assistant-inbound-internal"),m=o("link-assistant-affiliate"),g=o("link-assistant-external"),y=o("link-assistant-suggestions");return d(),I("div",Ms,[s.loadingInitialData?(d(),I("div",Bs,[n("div",Os,[n("a",{href:"#",onClick:e[0]||(e[0]=D((...c)=>i.closePostReport&&i.closePostReport(...c),["stop","prevent"]))},[b(" ← "),n("span",null,r(s.strings.backToLinksReport),1)])]),n("div",Fs,[n("div",Vs,[n("span",Ns,r(s.strings.loadingHeader),1)])])])):f("",!0),s.showLoadingBar?(d(),I("div",qs,[n("div",{class:"load-progress-value",style:Pt({animationDuration:s.loadTime+"s"})},null,4)])):f("",!0),s.loadingInitialData?f("",!0):(d(),I("div",Us,[n("div",Ks,[n("a",{href:"#",onClick:e[1]||(e[1]=D((...c)=>i.closePostReport&&i.closePostReport(...c),["prevent"]))},[b(" ← "),n("span",null,r(s.strings.backToLinksReport),1)])]),n("div",Es,[n("div",zs,[n("span",Hs,r(i.header),1),n("div",Ys,[n("a",{class:"view-post-link",href:s.post.context.permalink,target:"_blank"},r(t.viewPost(s.post.context.postType.singular)),9,js),b(" | "),n("a",{class:"edit-post-link",href:s.post.context.editLink,target:"_blank"},r(t.editPost(s.post.context.postType.singular)),9,Gs)])]),n("div",Js,[p(A,{type:"blue",tag:"button",loading:s.refreshLoading,disabled:t.isPrioritizedPost,onClick:i.doRefresh},{default:l(()=>[p(v),b(" "+r(s.strings.refresh),1)]),_:1},8,["loading","disabled","onClick"])])])])),p(S,{class:"link-tabs",internal:"",tabs:i.tabs,active:s.activeTab,showSaveButton:!1,onChanged:e[2]||(e[2]=c=>i.processChangeTab(c))},{"var-tab-icon":l(({tab:c})=>[(d(),_(q(c.icon),{class:C([{warning:c.warning}])},null,8,["class"]))]),_:1},8,["tabs","active"]),s.activeTab==="outbound-internal"?(d(),_(T,{key:3,post:i.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":"",onOpenSuggestions:e[3]||(e[3]=c=>i.processChangeTab("link-suggestions","suggestions-outbound"))},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="inbound-internal"?(d(),_(P,{key:4,post:i.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":"",onOpenSuggestions:e[4]||(e[4]=c=>i.processChangeTab("link-suggestions","suggestions-inbound"))},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="affiliate"?(d(),_(m,{key:5,post:i.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="external"?(d(),_(g,{key:6,post:i.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="link-suggestions"?(d(),_(y,{key:7,post:i.getPost,postIndex:s.postIndex,postId:s.postId,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(s.post),initialTab:s.activeSuggestionTab,"post-report":"",onShowStandalone:e[5]||(e[5]=c=>t.showStandalone=!0),onSuggestionsTabChanged:e[6]||(e[6]=c=>s.activeSuggestionTab=c)},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","initialTab"])):f("",!0)])}const Qs=L(Ds,[["render",Ws]]);const Xs={setup(){return{rootStore:ct()}},components:{BaseHighlightToggle:Lt,CoreAlert:St,GridColumn:$t,GridRow:Ct},props:{type:{type:String,required:!0},options:{type:Object,required:!0},registeredPostStatuses:Object,excluded:{type:Array,default(){return[]}}},data(){return{strings:{label:this.$t.__("Label:",this.$td),name:this.$t.__("Status:",this.$td),noPostStatuses:this.$t.__("No post statuses available.",this.$td),noTaxonomies:this.$t.__("No taxonomies available.",this.$td),noPostStatusesDescription:this.$t.__("All post statuses are set to noindex or your site does not have any post statuses registered that are supported by this feature.",this.$td),noTaxonomiesDescription:this.$t.__("All taxonomies are set to noindex or your site does not have any taxonomies registered that are supported by this feature.",this.$td)}}},computed:{getRegisteredPostStatuses(){return this.registeredPostStatuses||this.rootStore.aioseo.postData},postStatuses(){return this.getRegisteredPostStatuses[this.type].filter(t=>!this.excluded.includes(t.status))}},methods:{emitInput(t){this.$emit("input",t)},updateValue(t,e){if(t){const a=this.options[this.type].included;a.push(e.status),this.options[this.type].included=a;return}const u=this.options[this.type].included.findIndex(a=>a===e.status);u!==-1&&this.options[this.type].included.splice(u,1)},getValue(t){return this.options[this.type].included.includes(t.status)},isActive(t){return this.options[this.type].included.findIndex(u=>u===t.status)!==-1}}},Zs={class:"aioseo-post-status-options-toggle"},te={class:"post-status-options-settings"};function se(t,e,u,a,s,i){const v=o("core-alert"),A=o("base-highlight-toggle"),S=o("grid-column"),T=o("grid-row");return d(),I("div",Zs,[n("div",te,[i.postStatuses.length===0&&u.type==="postStatuses"?(d(),_(v,{key:0,type:"blue"},{default:l(()=>[n("strong",null,r(s.strings.noPostStatuses),1),b(" "+r(s.strings.noPostStatusesDescription),1)]),_:1})):f("",!0),i.postStatuses.length===0&&u.type==="taxonomies"?(d(),_(v,{key:1,type:"blue"},{default:l(()=>[n("strong",null,r(s.strings.noTaxonomies),1),b(" "+r(s.strings.noTaxonomiesDescription),1)]),_:1})):f("",!0),0<i.postStatuses.length?(d(),_(T,{key:2},{default:l(()=>[(d(!0),I(vt,null,yt(i.postStatuses,(P,m)=>(d(),_(S,{md:"6",key:m},{default:l(()=>[p(A,{size:"medium",active:i.isActive(P),name:P.label,type:"checkbox",modelValue:i.getValue(P),"onUpdate:modelValue":g=>i.updateValue(g,P)},{default:l(()=>[b(r(P.label)+" ("+r(P.status)+") ",1)]),_:2},1032,["active","name","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})):f("",!0)])])}const ee=L(Xs,[["render",se]]);const ne={setup(){return{linkAssistantStore:x()}},components:{BaseCheckbox:At,BaseTextarea:Tt,CoreCard:Rt,CoreExcludePosts:xt,CorePostStatusOptions:ee,CorePostTypeOptions:Dt,CoreSettingsRow:Mt},mixins:[It],data(){return{initialAffiliateLinkPrefixes:"",strings:{settings:this.$t.__("Link Settings",this.$tdPro),postTypes:this.$t.__("Post Types",this.$tdPro),includeAllPostTypes:this.$t.__("Include All Post Types",this.$tdPro),selectPostTypes:this.$t.__("Select which Post Types you want to enable Link Assistant for.",this.$tdPro),postStatuses:this.$t.__("Post Statuses",this.$tdPro),includeAllPostStatuses:this.$t.__("Include All Post Statuses",this.$tdPro),selectPostStatuses:this.$t.__("Select which Post Statuses you want to enable Link Assistant for.",this.$tdPro),skipSentences:this.$t.__("Number of Sentences to Skip at Beginning",this.$tdPro),skipSentencesDescription:this.$t.sprintf(this.$t.__("The amount of sentences at the beginning of the article that %1$s should not suggest internal links for.",this.$tdPro),"AIOSEO"),affiliatePrefix:this.$t.__("Affiliate Link Prefix",this.$tdPro),affiliatePrefixDescription:this.$t.sprintf(this.$t.__('Enter one or multiple link prefixes that %1$s should consider as affiliate links, e.g. "/go/", "/refer/" or "https://amazn.to".',this.$tdPro),"AIOSEO"),excludePostsPages:this.$t.__("Exclude Posts / Pages",this.$tdPro),wordsToIgnore:this.$t.__("Words to Ignore",this.$tdPro)}}},methods:{validateSkipSentences(t){0>t.target.value&&(t.target.value=0)}},beforeMount(){this.initialAffiliateLinkPrefixes=this.linkAssistantStore.options.main.affiliatePrefix,window.aioseoBus.$on("changes-saved",()=>{this.initialAffiliateLinkPrefixes=this.linkAssistantStore.options.main.affiliatePrefix})}},ie={class:"aioseo-link-assistant-settings"},oe={class:"aioseo-description"},ae=["innerHTML"],re={class:"aioseo-description"},le=["innerHTML"],de={class:"aioseo-description"},ue={class:"aioseo-description"};function pe(t,e,u,a,s,i){const v=o("base-checkbox"),A=o("core-post-type-options"),S=o("core-settings-row"),T=o("core-post-status-options"),P=o("base-input"),m=o("base-select"),g=o("core-exclude-posts"),y=o("base-textarea"),c=o("core-card");return d(),I("div",ie,[p(c,{slug:"linkAssistantSettings","header-text":s.strings.settings},{default:l(()=>[p(S,{name:s.strings.postTypes},{content:l(()=>[p(v,{size:"medium",modelValue:a.linkAssistantStore.options.main.postTypes.all,"onUpdate:modelValue":e[0]||(e[0]=w=>a.linkAssistantStore.options.main.postTypes.all=w)},{default:l(()=>[b(r(s.strings.includeAllPostTypes),1)]),_:1},8,["modelValue"]),a.linkAssistantStore.options.main.postTypes.all?f("",!0):(d(),_(A,{key:0,id:"postTypes",options:a.linkAssistantStore.options.main,excluded:["attachment"],type:"postTypes"},null,8,["options"])),n("div",oe,[b(r(s.strings.selectPostTypes)+" ",1),n("span",{innerHTML:t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"linkAssistantPostTypes",!0)},null,8,ae)])]),_:1},8,["name"]),p(S,{name:s.strings.postStatuses},{content:l(()=>[p(v,{size:"medium",modelValue:a.linkAssistantStore.options.main.postStatuses.all,"onUpdate:modelValue":e[1]||(e[1]=w=>a.linkAssistantStore.options.main.postStatuses.all=w)},{default:l(()=>[b(r(s.strings.includeAllPostStatuses),1)]),_:1},8,["modelValue"]),a.linkAssistantStore.options.main.postStatuses.all?f("",!0):(d(),_(T,{key:0,id:"postStatuses",options:a.linkAssistantStore.options.main,type:"postStatuses"},null,8,["options"])),n("div",re,[b(r(s.strings.selectPostStatuses)+" ",1),n("span",{innerHTML:t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"linkAssistantPostStatuses",!0)},null,8,le)])]),_:1},8,["name"]),p(S,{name:s.strings.skipSentences,align:""},{content:l(()=>[p(P,{modelValue:a.linkAssistantStore.options.main.skipSentences,"onUpdate:modelValue":e[2]||(e[2]=w=>a.linkAssistantStore.options.main.skipSentences=w),class:"settings-skip-sentences",type:"number",size:"medium",min:0,onKeyup:e[3]||(e[3]=w=>i.validateSkipSentences(w))},null,8,["modelValue"]),n("div",de,r(s.strings.skipSentencesDescription),1)]),_:1},8,["name"]),p(S,{class:"affiliate-prefix",name:s.strings.affiliatePrefix,align:""},{content:l(()=>[p(m,{multiple:"",taggable:"",options:t.getJsonValue(a.linkAssistantStore.options.main.affiliatePrefix)||[],modelValue:t.getJsonValue(a.linkAssistantStore.options.main.affiliatePrefix)||[],"onUpdate:modelValue":e[4]||(e[4]=w=>a.linkAssistantStore.options.main.affiliatePrefix=t.setJsonValue(w))},null,8,["options","modelValue"]),n("div",ue,r(s.strings.affiliatePrefixDescription),1)]),_:1},8,["name"]),p(S,{name:s.strings.excludePostsPages,align:""},{content:l(()=>[p(g,{options:a.linkAssistantStore.options.main,type:"posts"},null,8,["options"])]),_:1},8,["name"]),p(S,{name:s.strings.wordsToIgnore},{content:l(()=>[p(y,{minHeight:200,autosize:!1,modelValue:a.linkAssistantStore.options.main.wordsToIgnore,"onUpdate:modelValue":e[5]||(e[5]=w=>a.linkAssistantStore.options.main.wordsToIgnore=w)},null,8,["modelValue"])]),_:1},8,["name"])]),_:1},8,["header-text"])])}const ce=L(ne,[["render",pe]]);const he={setup(){return{linkAssistantStore:x()}},components:{CoreMain:mt,CoreProcessingPopup:_t,DomainsReport:es,LinksReport:Cs,Overview:wt,PostReport:Qs,Settings:ce},mixins:[ht,gt],data(){return{strings:{pageName:this.$t.__("Link Assistant",this.$td)}}},computed:{excludedTabs(){const t=(B.isActive("aioseo-link-assistant")?this.getExcludedUpdateTabs("aioseo-link-assistant"):this.getExcludedActivationTabs("aioseo-link-assistant"))||[];return t.push("post-report"),t}},mounted(){window.aioseoBus.$on("changes-saved",()=>{this.linkAssistantStore.getMenuData()}),this.$isPro&&this.linkAssistantStore.suggestionsScan.percent!==100&&B.isActive("aioseo-link-assistant")&&!B.requiresUpgrade("aioseo-link-assistant")&&B.hasMinimumVersion("aioseo-link-assistant")&&this.linkAssistantStore.pollSuggestionsScan()}},ge={class:"aioseo-link-assistant"};function me(t,e,u,a,s,i){const v=o("core-main");return d(),I("div",ge,[p(v,{"page-name":s.strings.pageName,"exclude-tabs":i.excludedTabs,showTabs:t.$route.name!=="post-report"},{default:l(()=>[(d(),_(q(t.$route.name)))]),_:1},8,["page-name","exclude-tabs","showTabs"])])}const Dn=L(he,[["render",me]]);export{Dn as default};
