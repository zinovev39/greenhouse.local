import{e as I}from"./regex.ebd490ab.js";import{a as M,r as Z,w as G,J as L,j as D,m as O,c as J,s as ut}from"./links.574d4fd4.js";import{C as x,W as H}from"./Table.62305440.js";import{C as q}from"./Tooltip.72f8a160.js";import{a as N,b as pt,c as ht}from"./Affiliate.fdeb2d7c.js";import{S as Y,C as j}from"./index.b1bbc091.js";import{x as d,o as l,k as y,l as f,a as r,H as $,C as c,t as u,D as S,c as h,b as g,m as gt,I as C,F as Q,L as X,q as ct}from"./vue.runtime.esm-bundler.78401fbe.js";import{_ as T}from"./_plugin-vue_export-helper.58be9317.js";import{P as W}from"./PostTypes.797a4244.js";import{S as tt}from"./Suggestion.db3b227b.js";import{_ as R}from"./default-i18n.3881921e.js";import{C as kt}from"./Tabs.d491c719.js";import{C as mt}from"./Index.815fe32c.js";import{S as ft,a as st,e as _t}from"./Caret.89e18339.js";import{B as bt}from"./Editor.df2359d9.js";import{T as et}from"./Slide.6b2090d0.js";import{S as ot}from"./Plus.cdfc8876.js";const wt=()=>{let s=M().currentPost.postStatus;return Z()&&(s=window.wp.data.select("core/editor").getCurrentPostAttribute("status")),s},po={methods:{filteredSuggestionsOutbound(t){const s=t.links.suggestionsOutbound.rows,o=[];return s.forEach(i=>{this.editorIsSuggestionAlreadyAdded(i)||o.push(i)}),o},editorIsSuggestionAlreadyAdded(t){return Z()?this.blockEditorIsSuggestionAlreadyAdded(t):G()?this.classicEditorIsSuggestionAlreadyAdded(t):!1},blockEditorIsSuggestionAlreadyAdded(t){const s=window.wp.data.select("core/block-editor").getBlocks();return s?this.doesBlockHaveLink(s,t):!1},doesBlockHaveLink(t,s){let o=!1;return t.forEach(i=>{o||!i.attributes||s.suggestions.forEach(e=>{const n=I(e.context.permalink.trim()),k=new RegExp(`(<a href="${n}"[^<>]*>)(.*)(</a[^<>]*>)`,"i");if(i.attributes.content&&i.attributes.content.search(k)!==-1){o=!0;return}if(!i.innerBlocks)return;this.doesBlockHaveLink(i.innerBlocks,s)&&(o=!0)})}),o},classicEditorIsSuggestionAlreadyAdded(t){let s="",o=null,i=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(o=window.tinyMCE.get("content"),s=o.getContent({format:"raw"})):(i=document.querySelector("textarea#content"),s=i?i.value:""),!s)return!1;let e=!1;return t.suggestions.forEach(n=>{const k=I(n.context.permalink.trim()),m=new RegExp(`(<a href="${k}"[^<>]*>)(.*)(</a[^<>]*>)`,"i");s.search(m)!==-1&&(e=!0)}),e}}},B="all-in-one-seo-pack",F=()=>{const t={frontPage:R("Front Page",B),deleteLink:R("Delete Link",B)},s={areYouSureSingle:R("Are you sure you want to delete this link?",B),areYouSureMultiple:R("Are you sure you want to delete these links?",B),areYouSureAll:R("Are you sure you want to delete all links?",B),actionCannotBeUndone:R("This action cannot be undone.",B),yesSingle:R("Yes, I want to delete this link",B),yesMultiple:R("Yes, I want to delete these links",B),yesAll:R("Yes, I want to delete all links",B),noChangedMind:R("No, I changed my mind",B)};return{bulkOptions:[{label:R("Delete",B),value:"delete"}],modalStrings:s,strings:t}},nt={methods:{findTargetBlock(t,s){const o=I(s);let i=null;return t.forEach(e=>{if(i||!e.attributes)return;if(e.attributes.content&&e.attributes.content.search(o)!==-1){i=e.clientId;return}if(!e.innerBlocks)return;const n=this.findTargetBlock(e.innerBlocks,s);n&&(i=n)}),i}}},V={emits:["updatingLinks","linksUpdated"],mixins:[nt],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!1},postId:{type:Number,required:!1},linksReport:{type:Boolean,default(){return!1}},postReport:{type:Boolean,default(){return!1}},metabox:{type:Boolean,default(){return!1}}},beforeMount(){window.aioseoBus.$on("updatingLinks",s=>{this.wpTableLoading=s});const t=L();this.pageNumber=this.linkType?t.postReport[this.linkType].totals.page:1},data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",action:"",showModal:!1,selectedRows:[]}},computed:{rows(){if(!this.metabox)return this.post.links[this.linkType].rows;const t=this.pageNumber===1?0:(this.pageNumber-1)*10;return this.post.links[this.linkType].rows.slice(t,t+10)}},methods:{fetchData(t){const s=M();window.aioseoBus.$emit("updatingLinks",!0);const o={...t,additionalFilters:{postId:this.post.ID||s.currentPost.id,postIndex:this.postIndex,type:this.linkType}},i=L(),e=this.postReport?"fetchPostReport":"fetchLinksReportInner";return i[e](o).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},openPostReport(t){window.location.href=`#/post-report?postId=${this.postId}&postIndex=${this.postIndex}&initialTab=${t}`},maybeDoBulkAction({action:t,selectedRows:s}){!s.length||!t||(this.action=t,this.selectedRows=s,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,this.selectedRows===!1||typeof this.selectedRows>"u"||!this.selectedRows.length)return;if(typeof this.selectedRows=="number"){this.doDeleteLink(this.selectedRows);return}if(this.metabox&&this.linkType!=="inboundInternal"){this.idsToIndexes(this.selectedRows).forEach(i=>{this.editorRemoveLink(i)});return}window.aioseoBus.$emit("updatingLinks",!0);const t=L(),s=M();t.linksBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,linkType:this.linkType,linkIds:this.selectedRows,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},doDeleteLink(t){const s=this.post.links[this.linkType].rows[t].id;if(!s)return;if(this.metabox&&this.linkType!=="inboundInternal"){this.editorRemoveLink(t);return}window.aioseoBus.$emit("updatingLinks",!0);const o=L(),i=M();o.linkDelete({postIndex:this.postIndex,postId:this.post.ID||i.currentPost.id,linkId:s,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},editorRemoveLink(t){Z()&&(window.aioseoBus.$emit("updatingLinks",!1),this.blockEditorRemoveLink(t),window.aioseoBus.$emit("updatingLinks",!1)),G()&&this.classicEditorRemoveLink(t)},blockEditorRemoveLink(t){const o=M().currentPost.linkAssistant.links[this.linkType].rows[t];if(!o)return;window.aioseoBus.$emit("updatingLinks",!0);const i=I(o.anchor.trim()),e=o.phrase_html.trim(),n=I(e),k=window.wp.data.select("core/block-editor").getBlocks(),m=this.findTargetBlock(k,e);if(!m){window.aioseoBus.$emit("updatingLinks",!1);return}const w=window.wp.data.select("core/block-editor").getBlock(m);if(!w){window.aioseoBus.$emit("updatingLinks",!1);return}let b=new RegExp(`(<t?a[^<>]*>)(.*)?(${i})(.*)?(</t?a[^<>]*>)`,"i");const _=e.replace(b,"$2$3$4");b=new RegExp(`${n}`,"i"),window.wp.data.dispatch("core/block-editor").updateBlockAttributes(m,{content:w.attributes.content.replace(b,_)}).then(()=>{this.post.links[this.linkType].rows.splice(t,1)}).catch(P=>{console.error(`Couldn	 delete link with type "${this.linkType}" and index ${t}:`,P)}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated")})},classicEditorRemoveLink(t){var p;const o=M().currentPost.linkAssistant.links[this.linkType].rows[t];if(!o||!window.tinyMCE)return;window.aioseoBus.$emit("updatingLinks",!0);let i="",e=null,n=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(e=window.tinyMCE.get("content"),i=e.getContent({format:"raw"})):(n=document.querySelector("textarea#content"),i=n?n.value:""),!i){window.aioseoBus.$emit("updatingLinks",!1);return}let k=o.phrase_html.trim();e||(k=k.replace(/(\sdata-mce-href=".*")/gi,""));const m=I(o.anchor.trim());let w=new RegExp(`(<t?a[^<>]*>)(.*)?(${m})(.*)?(</t?a[^<>]*>)`,"i");const b=k.replace(w,"$2$3$4"),_=I(k);w=new RegExp(`${_}`,"i"),i=i.replace(w,b),e?e.setContent(i):n.value=i,this.post.links[this.linkType].rows.splice(t,1),(p=L().postSettingsUpdate({postContent:i}))==null||p.finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated")})},idsToIndexes(t){let s,o=[];return Array.isArray(t)&&(s=t.map(Number)),s&&this.post.links[this.linkType].rows.forEach((i,e)=>{s.includes(i.id)&&o.push(e)}),t==="all"&&(o=this.post.links[this.linkType].rows.map((i,e)=>e)),o.sort(function(i,e){return e-i})}}};const vt={emits:["closeModal","doBulkAction"],components:{CoreModal:mt,SvgClose:ft},props:{selectedRows:{required:!0},strings:{type:Object,required:!0},show:Boolean},computed:{areYouSure(){return this.selectedRows==="all"?this.strings.areYouSureAll:Array.isArray(this.selectedRows)&&1<this.selectedRows.length?this.strings.areYouSureMultiple:this.strings.areYouSureSingle},confirmation(){return this.selectedRows==="all"?this.strings.yesAll:Array.isArray(this.selectedRows)&&1<this.selectedRows.length?this.strings.yesMultiple:this.strings.yesSingle}}},Pt={class:"aioseo-modal-body"},yt=["innerHTML"];function $t(t,s,o,i,e,n){const k=d("svg-close"),m=d("base-button"),w=d("core-modal");return l(),y(w,{show:o.show,classes:["aioseo-link-assistant-confirmation-modal"],"no-header":"",onClose:s[4]||(s[4]=b=>t.$emit("closeModal",!0))},{body:f(()=>[r("div",Pt,[r("button",{class:"close",onClick:s[1]||(s[1]=$(b=>t.$emit("closeModal",!0),["stop"]))},[c(k,{onClick:s[0]||(s[0]=b=>t.$emit("closeModal",!0))})]),r("h3",null,u(n.areYouSure),1),r("div",{class:"reset-description",innerHTML:o.strings.actionCannotBeUndone},null,8,yt),c(m,{type:"blue",size:"medium",onClick:s[2]||(s[2]=b=>t.$emit("doBulkAction",b))},{default:f(()=>[S(u(n.confirmation),1)]),_:1}),c(m,{type:"gray",size:"medium",onClick:s[3]||(s[3]=b=>t.$emit("closeModal",!0))},{default:f(()=>[S(u(o.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])}const U=T(vt,[["render",$t]]);const St={components:{CoreTooltip:q},props:{phrase:{type:String,required:!0},phraseHtml:{type:String,required:!0},anchor:{type:String,required:!0},url:{type:String,required:!0},tooltip:{type:Boolean,required:!1,default:!0},clickableAnchor:{type:Boolean,default(){return!1}}},computed:{partPattern(){const t=this.decodeHtmlEntities(this.anchor),s=I(t);return new RegExp(`(.*)(<t?a[^>]*>.*${s}.*</t?a>)(.*)`,"i")},firstPart(){return this.decodeHtmlEntities(this.stripTags(this.getPart(1)).trimStart())},linkAnchor(){return this.decodeHtmlEntities(this.stripTags(this.getPart(2)))},lastPart(){return this.decodeHtmlEntities(this.stripTags(this.getPart(3)).trimEnd())}},methods:{getPart(t){const o=this.decodeHtmlEntities(this.stripTags(this.phraseHtml,!0)).match(this.partPattern);return o?o[t]:""},stripTags(t,s=!1){return t=t.replace(/<br\s?\/?>/gi," "),s?t.replace(/<(?!a\s)(?!\/a)[^>]*>/gi,""):t.replace(/<[^>]*>/gi,"")},maybeOpenLink(){this.clickableAnchor&&window.open(this.url,"_blank").focus()},decodeHtmlEntities(t){const s=document.createElement("textarea");return s.innerHTML=t,s.value}}},At={class:"phrase"},Rt={key:0,class:"first"},It=["href"],Tt={key:2},Lt={class:"anchor"},Ct={key:3,class:"last"};function Bt(t,s,o,i,e,n){const k=d("core-tooltip");return l(),h("div",{class:"aioseo-link-assistant-phrase",onMouseover:s[1]||(s[1]=m=>t.$emit("mouseOver")),onMouseleave:s[2]||(s[2]=m=>t.$emit("mouseLeave"))},[r("span",At,[n.firstPart?(l(),h("span",Rt,u(n.firstPart),1)):g("",!0),o.tooltip?(l(),y(k,{key:1,type:"action"},{tooltip:f(()=>[r("a",{class:"tooltip-url",href:o.url,target:"_blank"},u(o.url),9,It)]),default:f(()=>[r("span",{class:"anchor",onClick:s[0]||(s[0]=(...m)=>n.maybeOpenLink&&n.maybeOpenLink(...m))},u(n.linkAnchor),1)]),_:1})):g("",!0),o.tooltip?g("",!0):(l(),h("div",Tt,[r("span",Lt,u(n.linkAnchor),1)])),n.lastPart?(l(),h("span",Ct,u(n.lastPart),1)):g("",!0)]),gt(t.$slots,"icons")],32)}const K=T(St,[["render",Bt]]),Mt={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=F();return{settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},components:{CoreTooltip:q,CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:K,SvgLinkExternal:N,SvgTrash:Y},mixins:[V,H],data(){return{tableId:"aioseo-post-report-affiliate",linkType:"affiliate",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("Affiliate",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Et={key:0,class:"links-bottom"},Ot={class:"links-bottom-left"},Dt={key:0},xt={class:"links-bottom-right"};function Ht(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),w=d("core-tooltip"),b=d("core-wp-table"),_=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(b,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.affiliate.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{phrase:f(({row:p})=>[c(k,{phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,url:p.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:p})=>[c(w,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:v=>t.maybeDoBulkAction({action:"delete",selectedRows:p})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",Et,[r("div",Ot,[t.post.links.affiliate.totals.total>5&&t.postReport?(l(),h("div",Dt,[c(_),r("a",{class:"link-view",href:"#",onClick:s[0]||(s[0]=$(p=>t.openPostReport("affiliate"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",xt,[t.post.links.affiliate.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[1]||(s[1]=$(p=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(P,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[2]||(s[2]=p=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const ho=T(Mt,[["render",Ht]]),qt={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=F();return{settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},components:{CoreTooltip:q,CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:K,SvgLinkExternal:N,SvgTrash:Y},mixins:[V,H],data(){return{tableId:"aioseo-post-report-external",linkType:"external",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("External",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.external.totals.total,this.$t.__("External",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Nt={key:0,class:"links-bottom"},Ut={class:"links-bottom-left"},Yt={key:0},Ft={class:"links-bottom-right"};function Vt(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),w=d("core-tooltip"),b=d("core-wp-table"),_=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(b,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.external.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{phrase:f(({row:p})=>[c(k,{phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,url:p.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:p})=>[c(w,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:v=>t.maybeDoBulkAction({action:"delete",selectedRows:p})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",Nt,[r("div",Ut,[t.post.links.external.totals.total>5&&t.linksReport?(l(),h("div",Yt,[c(_),r("a",{class:"link-view",href:"#",onClick:s[0]||(s[0]=$(p=>t.openPostReport("external"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",Ft,[t.post.links.external.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[1]||(s[1]=$(p=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(P,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[2]||(s[2]=p=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const go=T(qt,[["render",Vt]]),Kt={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=F();return{rootStore:J(),settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},emits:["openSuggestions"],components:{CoreTooltip:q,CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:K,SvgLinkExternal:N,SvgLinkSuggestion:tt,SvgTrash:Y},mixins:[V,W,H],data(){return{tableId:"aioseo-post-report-inbound-internal",linkType:"inboundInternal",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$td),this.$t.__("Inbound Internal",this.$td)),outboundSuggestions:this.$t.sprintf(this.$t.__("%1$s Link Suggestions",this.$td),this.$t.__("Inbound",this.$td))})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$td)},{slug:"phrase",label:this.$t.__("Phrase",this.$td)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$td),this.post.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$td))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},zt={key:0},Zt={key:0,class:"row-actions"},Wt={class:"view"},Gt=["href"],Jt={class:"edit"},jt=["href"],Qt={key:0,class:"links-bottom"},Xt={class:"links-bottom-left"},ts={key:1},ss={class:"links-bottom-right"};function es(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),w=d("core-tooltip"),b=d("core-wp-table"),_=d("svg-link-suggestion"),P=d("base-button"),p=d("svg-link-external"),v=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(b,{id:e.tableId,key:t.wpTableKey,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,loading:t.wpTableLoading,rows:t.rows,totals:t.post.links.inboundInternal.totals,"bulk-options":i.bulkOptions,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:a})=>{var A,E;return[r("span",null,[S(u(a.context.postTitle)+" ",1),((E=(A=a.context)==null?void 0:A.permalink)==null?void 0:E.replace(/\/$/,""))===i.rootStore.aioseo.urls.home?(l(),h("span",zt,"("+u(e.strings.frontPage)+")",1)):g("",!0)]),a.context?(l(),h("div",Zt,[r("span",Wt,[r("a",{href:a.context.permalink,target:"_blank"},u(t.viewPost(a.context.postType.singular)),9,Gt),S(" | ")]),r("span",Jt,[r("a",{href:a.context.editLink,target:"_blank"},u(t.editPost(a.context.postType.singular)),9,jt)])])):g("",!0)]}),phrase:f(({row:a})=>[c(k,{phrase:a.phrase,phraseHtml:a.phrase_html||"",anchor:a.anchor,url:a.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:a})=>[c(w,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:A=>t.maybeDoBulkAction({action:"delete",selectedRows:a})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["id","class","columns","loading","rows","totals","bulk-options","initial-items-per-page","initial-page-number","show-pagination","show-table-footer","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",Qt,[r("div",Xt,[t.post.links.inboundInternal.rows.length?(l(),y(P,{key:0,type:"blue",tag:"button",onClick:s[0]||(s[0]=a=>t.$emit("openSuggestions"))},{default:f(()=>[c(_),S(" "+u(e.strings.outboundSuggestions),1)]),_:1})):g("",!0),t.post.links.inboundInternal.totals.total>5&&t.linksReport?(l(),h("div",ts,[c(p),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(a=>t.openPostReport("inbound-internal"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",ss,[t.post.links.inboundInternal.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(a=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(v,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[3]||(s[3]=a=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const co=T(Kt,[["render",es]]),os={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=F();return{rootStore:J(),settingsStore:D(),composableStrings:t,bulkOptions:o,modalStrings:s}},emits:["openSuggestions"],components:{CoreTooltip:q,CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantPhrase:K,SvgLinkExternal:N,SvgLinkSuggestion:tt,SvgTrash:Y},mixins:[V,W,H],data(){return{tableId:"aioseo-post-report-outbound-internal",linkType:"outboundInternal",strings:O(this.composableStrings,{deleteAllLinks:this.$t.sprintf(this.$t.__("Delete All %1$s Links",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro)),outboundSuggestions:this.$t.sprintf(this.$t.__("%1$s Link Suggestions",this.$tdPro),this.$t.__("Outbound",this.$tdPro)),openUrl:this.$t.__("Open URL",this.$tdPro)})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title / URL",this.$tdPro)},{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"delete",width:"50px"}]},seeAllLinks(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Links",this.$tdPro),this.post.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},ns={key:0},is={key:0},rs={key:1},ls={key:0},as={key:2,class:"row-actions"},ds={class:"view"},us=["href"],ps={class:"edit"},hs=["href"],gs={key:3,class:"row-actions"},cs={class:"view"},ks=["href"],ms={key:0,class:"links-bottom"},fs={class:"links-bottom-left"},_s={key:1},bs={class:"links-bottom-right"};function ws(t,s,o,i,e,n){const k=d("link-assistant-phrase"),m=d("svg-trash"),w=d("core-tooltip"),b=d("core-wp-table"),_=d("svg-link-suggestion"),P=d("base-button"),p=d("svg-link-external"),v=d("link-assistant-confirmation-modal");return l(),h("div",null,[(l(),y(b,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.outboundInternal.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:a})=>[a.context&&a.context.postTitle?(l(),h("span",ns,[S(u(a.context.postTitle)+" ",1),a.url.replace(/\/$/,"")===i.rootStore.aioseo.urls.home?(l(),h("span",is,"("+u(e.strings.frontPage)+")",1)):g("",!0)])):g("",!0),!a.context||!a.context.postTitle?(l(),h("span",rs,[S(u(a.url)+" ",1),a.url.replace(/\/$/,"")===i.rootStore.aioseo.urls.home?(l(),h("span",ls,"("+u(e.strings.frontPage)+")",1)):g("",!0)])):g("",!0),a.context?(l(),h("div",as,[r("span",ds,[r("a",{href:a.url,target:"_blank"},u(t.viewPost(a.context.postType.singular)),9,us),S(" | ")]),r("span",ps,[r("a",{href:a.context.editLink,target:"_blank"},u(t.editPost(a.context.postType.singular)),9,hs)])])):g("",!0),a.context?g("",!0):(l(),h("div",gs,[r("span",cs,[r("a",{href:a.url,target:"_blank"},u(e.strings.openUrl),9,ks)])]))]),phrase:f(({row:a})=>[c(k,{phrase:a.phrase,phraseHtml:a.phrase_html,anchor:a.anchor,url:a.url,clickableAnchor:!0},null,8,["phrase","phraseHtml","anchor","url"])]),delete:f(({index:a})=>[c(w,{type:"action"},{tooltip:f(()=>[S(u(e.strings.deleteLink),1)]),default:f(()=>[c(m,{onClick:A=>t.maybeDoBulkAction({action:"delete",selectedRows:a})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",ms,[r("div",fs,[t.post.links.outboundInternal.rows.length?(l(),y(P,{key:0,type:"blue",tag:"button",onClick:s[0]||(s[0]=a=>t.$emit("openSuggestions"))},{default:f(()=>[c(_),S(" "+u(e.strings.outboundSuggestions),1)]),_:1})):g("",!0),t.post.links.outboundInternal.totals.total>5&&t.linksReport?(l(),h("div",_s,[c(p),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(a=>t.openPostReport("outbound-internal"),["prevent"]))},u(n.seeAllLinks),1)])):g("",!0)]),r("div",bs,[t.post.links.outboundInternal.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(a=>t.maybeDoBulkAction({action:"delete",selectedRows:"all"}),["prevent"]))},u(e.strings.deleteAllLinks),1)):g("",!0)])])),c(v,{show:t.showModal,selectedRows:t.selectedRows,strings:i.modalStrings,onDoBulkAction:t.doBulkAction,onCloseModal:s[3]||(s[3]=a=>t.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const ko=T(os,[["render",ws]]),z="aioseo-pro",it=()=>{const t={addLink:R("Add Link",z),dismiss:R("Dismiss Suggestion",z)};return{bulkOptions:[{label:R("Add Link",z),value:"add"},{label:R("Dismiss",z),value:"dismiss"}],strings:t}},rt={emits:["updatingLinks","linksUpdated"],mixins:[nt],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!1},postId:{type:Number,required:!1},filteredSuggestionsOutbound:{type:Array,required:!1},postReport:{type:Boolean,default(){return!1}},linksReport:{type:Boolean,default(){return!1}},metabox:{type:Boolean,default(){return!1}}},beforeMount(){window.aioseoBus.$on("updatingLinks",s=>{this.wpTableLoading=s});const t=L();this.pageNumber=this.suggestionType?t.postReport[this.suggestionType].totals.page:1},data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",editablePhraseKey:0,activeSuggestionRow:-1,action:"",showModal:!1,selectedRows:[]}},computed:{rows(){if(!this.metabox)return this.post.links[this.suggestionType].rows;const t=this.pageNumber===1?0:(this.pageNumber-1)*10;return this.suggestionType==="suggestionsOutbound"?this.filteredSuggestionsOutbound.slice(t,t+10):this.post.links[this.suggestionType].rows.slice(t,t+10)},modalStrings(){return this.action==="add"?{areYouSureSingle:this.$t.__("Are you sure you want to add this suggestion?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to add these suggestions?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to add all suggestions?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to add this suggestion",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to add these suggestions",this.$tdPro),yesAll:this.$t.__("Yes, I want to add all suggestions",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}:{areYouSureSingle:this.$t.__("Are you sure you want to dismiss this suggestion?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to dismiss these suggestions?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to dismiss all suggestions?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to dismiss this suggestion",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to dismiss these suggestions",this.$tdPro),yesAll:this.$t.__("Yes, I want to dismiss all suggestions",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},methods:{fetchData(t){window.aioseoBus.$emit("updatingLinks",!0);const s=M(),o={...t,additionalFilters:{postId:this.post.ID||s.currentPost.id,postIndex:this.postIndex,type:this.suggestionType}},i=L(),e=this.postReport?"fetchPostReport":"fetchLinksReportInner";return i[e](o).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},toggleShowMorePhrases(t){if(this.activeSuggestionRow===t){this.activeSuggestionRow=-1;return}this.activeSuggestionRow=t},toggleShowMorePostTitles(t){if(this.activeSuggestionRow===t){this.activeSuggestionRow=-1;return}this.activeSuggestionRow=t},openPostReport(t,s){window.location.href=`#/post-report?postId=${this.postId}&postIndex=${this.postIndex}&initialTab=${t}&initialSuggestionTab=${s}`},saveModifiedPhrase(t){let s=null;const o=L();this.linksReport&&(s=o.linksReport.rows[this.postIndex].links[this.suggestionType].rows[t.postIndex]),this.postReport&&(s=o.postReport[this.suggestionType].rows[t.postIndex]),this.metabox&&(s=M().currentPost.linkAssistant.links[this.suggestionType].rows[t.postIndex]),s.suggestions[t.phraseIndex].phrase_html!==t.phraseHtml&&(s.suggestions[t.phraseIndex].phrase=t.phrase,s.suggestions[t.phraseIndex].phrase_html=t.phraseHtml,s.suggestions[t.phraseIndex].anchor=t.anchor)},addLink(t,s){let o=null;if(this.suggestionType==="suggestionsInbound"){const e=`editablePhrase${s}`;o=this.$refs[e].selectedPhrase}if(this.suggestionType==="suggestionsOutbound"&&(o=this.selectedPostTitleIndex),o===!1||typeof o>"u"){console.error("Couldn't determine index of suggestion.");return}if(this.suggestionType==="suggestionsOutbound"){const e=I(t.suggestions[0].context.permalink),n=I(t.suggestions[o].context.permalink),k=new RegExp(`/${e}/`,"i"),m=t.suggestions[0].phrase_html.replace(k,n);t.suggestions[o].phrase_html=m,t.suggestions[o].anchor=t.suggestions[0].anchor}const i=t.suggestions[o];t.suggestions[o]=t.suggestions[0],t.suggestions[0]=i,this.maybeDoBulkAction({action:"add",selectedRows:t})},maybeDoBulkAction({action:t,selectedRows:s}){s===!1||s===void 0||!t||(this.action=t,this.selectedRows=s,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,!this.selectedRows)return;if(this.action==="dismiss"&&typeof this.selectedRows=="number"){this.doDismissSuggestion(this.selectedRows);return}const t=L(),s=M();if(this.selectedRows==="all"){window.aioseoBus.$emit("updatingLinks",!0),t.suggestionsBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,suggestionType:this.suggestionType,suggestionRows:"all",linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()});return}let o=null;if(this.linksReport&&(o=t.linksReport.rows[this.postIndex].links[this.suggestionType].rows),this.postReport&&(o=t.postReport[this.suggestionType].rows),this.metabox){if(this.action==="add"&&this.suggestionType!=="suggestionsInbound"){if(window.aioseoBus.$emit("updatingLinks",!0),Array.isArray(this.selectedRows))this.selectedRows.forEach(e=>{this.editorAddSuggestion(e)});else{const e=this.selectedRows;this.editorAddSuggestion(e)}window.aioseoBus.$emit("updatingLinks",!1);return}o=s.currentPost.linkAssistant.links[this.suggestionType].rows}const i=[];Array.isArray(this.selectedRows)?this.selectedRows.forEach(e=>{i.push(o[e])}):i.push(this.selectedRows),window.aioseoBus.$emit("updatingLinks",!0),t.suggestionsBulk({postIndex:this.postIndex,postId:this.post.ID||s.currentPost.id,action:this.action,suggestionType:this.suggestionType,suggestionRows:i,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},doDismissSuggestion(t){window.aioseoBus.$emit("updatingLinks",!0);const s=L(),o=M();s.suggestionDismiss({postIndex:this.postIndex,postId:this.post.ID||o.currentPost.id,suggestionId:t,linksReport:this.linksReport,postReport:this.postReport}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.$emit("linksUpdated"),this.refreshTable()})},editorAddSuggestion(t){Z()&&this.blockEditorAddSuggestion(t),G()&&this.classicEditorAddSuggestion(t)},blockEditorAddSuggestion(t){let s=null,o=null;if(isNaN(t)?this.rows.forEach((P,p)=>{P.suggestions[0].id===t.suggestions[0].id&&(s=P,o=p)}):(o=t,s=this.rows[t]),!s||o===!1)return;window.aioseoBus.$emit("updatingLinks",!0);const i=window.wp.data.select("core/block-editor").getBlocks(),e=s.suggestions[0].original_phrase_html.trim(),n=this.findTargetBlock(i,e);if(!n){window.aioseoBus.$emit("updatingLinks",!1);return}const k=window.wp.data.select("core/block-editor").getBlock(n);if(!k){window.aioseoBus.$emit("updatingLinks",!1);return}const m=I(s.suggestions[0].anchor.trim());let w=new RegExp(`(${m})`,"i");const b=s.suggestions[0].phrase_html.trim(),_=I(e);w=new RegExp(`(${_})`,"i"),window.wp.data.dispatch("core/block-editor").updateBlockAttributes(n,{content:k.attributes.content.replace(w,b)}).then(()=>{this.rows.splice(o,1)}).catch(P=>{console.error("Couldn't add outbound link:",P)}).finally(()=>{L().postSettingsUpdate({postContent:window.wp.data.select("core/editor").getEditedPostContent(),skipNextRun:!0})})},classicEditorAddSuggestion(t){var p;let s=null,o=null;if(isNaN(t)?this.rows.forEach((v,a)=>{v.suggestions[0].id===t.suggestions[0].id&&(s=v,o=a)}):(o=t,s=this.rows[t]),!s||o===!1)return;window.aioseoBus.$emit("updatingLinks",!0);let i="",e=null,n=null;if(document.querySelector("#wp-content-wrap.tmce-active")?(e=window.tinyMCE.get("content"),i=e.getContent({format:"raw"})):(n=document.querySelector("textarea#content"),i=n?n.value:""),!i){window.aioseoBus.$emit("updatingLinks",!1);return}const k=s.suggestions[0].original_phrase_html.trim(),m=I(k),w=I(s.suggestions[0].anchor.trim());let b=new RegExp(`(${w})`,"i");const _=s.suggestions[0].phrase_html.trim();b=new RegExp(`(${m})`,"i"),i=i.replace(b,_),e?e.setContent(i):n.value=i,this.rows.splice(o,1),(p=L().postSettingsUpdate({postContent:i,skipNextRun:!0}))==null||p.finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})}}};const vs={emits:["saveEditor","closeEditor"],components:{BaseEditor:bt},props:{phrase:{type:String,required:!0},url:{type:String,required:!0},context:{type:String,required:!1}},data(){return{strings:{saveChanges:this.$t.__("Save Changes",this.$tdPro),cancel:this.$t.__("Cancel",this.$tdPro),context:this.$t.__("Context",this.$tdPro)}}},mounted(){this.$refs.linkEditor.setPhrase(this.phrase);const t=document.querySelector(".ql-autoLink");t&&(t.innerHTML='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"></path><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"></path></svg>',t.classList.add("ql-disabled"))},methods:{getPhrase(){return this.$refs.linkEditor.getPhrase()},getPhraseHtml(){return this.$refs.linkEditor.getPhraseHtml()},getPhraseWithFormats(){return this.$refs.linkEditor.getPhraseWithFormats()},selectionChange({range:t,source:s}){const o=document.querySelector(".ql-autoLink");o&&(!t||!t.length||s!=="user")?o.classList.add("ql-disabled"):o.classList.remove("ql-disabled")}}},Ps={class:"aioseo-phrase-editor"},ys={key:0,class:"context"},$s={class:"context-label"},Ss=["innerHTML"],As={class:"action-buttons"};function Rs(t,s,o,i,e,n){const k=d("base-editor"),m=d("base-button");return l(),h("div",Ps,[o.context?(l(),h("div",ys,[r("p",null,[r("strong",$s,u(e.strings.context)+":",1)]),r("p",{innerHTML:o.context},null,8,Ss)])):g("",!0),c(k,{ref:"linkEditor","auto-link":{url:o.url,phrase:o.phrase},"show-toolbar":"","allow-tags":"","onUpdate:modelValue":s[0]||(s[0]=w=>t.$emit("update:modelValue",w)),onSelectionChange:n.selectionChange},null,8,["auto-link","onSelectionChange"]),r("div",As,[c(m,{type:"blue",size:"small",onClick:s[1]||(s[1]=w=>t.$emit("saveEditor"))},{default:f(()=>[S(u(e.strings.saveChanges),1)]),_:1}),c(m,{type:"gray",size:"small",onClick:s[2]||(s[2]=w=>t.$emit("closeEditor"))},{default:f(()=>[S(u(e.strings.cancel),1)]),_:1})])])}const Is=T(vs,[["render",Rs]]);const Ts={emits:["toggleShowMorePhrases","saveModifiedPhrase","delete"],components:{LinkAssistantPhrase:K,LinkAssistantPhraseEditor:Is,SvgCaret:st,SvgPencil:_t,SvgTrash:Y,TransitionSlide:et},props:{row:{type:Object,required:!0},rowIndex:{type:Number,default:0},activeRow:{type:Number,default:-1},postIndex:{type:Number,required:!1},suggestionType:{type:String,required:!1},selectedPostTitleIndex:{type:Number,required:!1,default(){return 0}},linkSuggestion:{type:Boolean,default(){return!1}},domainsReport:{type:Boolean,default(){return!1}}},data(){return{phraseIndex:-1,showEditor:-1,hoveringOver:-1,selectedPhrase:0}},computed:{phrases(){return this.linkSuggestion?this.row.suggestions.slice(0,10):this.row.links.slice(0,10)},url(){return this.domainsReport?this.phrases[this.phraseIndex].url:this.suggestionType==="suggestionsInbound"?this.row.context.permalink:this.suggestionType==="suggestionsOutbound"?this.row.suggestions[this.selectedPostTitleIndex].context.permalink:""},showingMorePhrases(){return 1<this.phrases.length&&this.activeRow===this.rowIndex},viewMorePhrasesLabel(){const t=1<this.phrases.length?this.phrases.length-1:0;return this.$t.sprintf(this.$t._n("%1$d more phrase","%1$d more phrases",t,this.$tdPro),t)},phraseContext(){let t="",s="";if(this.linkSuggestion){const e=this.row.suggestions[this.phraseIndex];t=e.phrase.trim(),s=e.paragraph.trim()}else{const e=this.row.links[this.phraseIndex];t=e.phrase.trim(),s=e.paragraph.trim()}if(t===s)return"";const o=I(t),i=new RegExp(o,"i");return s.match(i)&&(s=s.replace(i,`<strong>${t}</strong>`)),s}},methods:{tooltipUrl(t,s){return this.domainsReport?s.url:this.suggestionType==="suggestionsInbound"?t.permalink:this.suggestionType==="suggestionsOutbound"&&t.suggestions[this.selectedPostTitleIndex]?t.suggestions[this.selectedPostTitleIndex].context.permalink:""},openEditor(t,s){this.phraseIndex=s,this.showEditor=t},processModifiedPhrase(){this.showEditor=-1,this.hoveringOver=-1;const t=this.$refs.linkEditor.getPhrase(),s=this.$refs.linkEditor.getPhraseHtml(),o=this.$refs.linkEditor.getPhraseWithFormats();let i="";o.ops.forEach(e=>{e.attributes&&e.attributes.link&&(i=i+e.insert)}),i&&this.$emit("saveModifiedPhrase",{phrase:t,phraseHtml:s,anchor:i,postIndex:this.rowIndex,phraseIndex:this.phraseIndex})},deleteLink(t,s,o){t.stopPropagation(),t.preventDefault(),this.$emit("delete",{postIndex:s,linkIndex:o})}}},Ls={class:"aioseo-editable-phrase"},Cs={class:"domains-report-editable-phrase"},Bs={key:0},Ms=["checked"],Es={class:"icons"},Os={key:0,class:"show-more-phrases"},Ds=["onClick"],xs=["checked","onClick"],Hs={class:"icons"};function qs(t,s,o,i,e,n){const k=d("svg-pencil"),m=d("svg-trash"),w=d("link-assistant-phrase"),b=d("svg-caret"),_=d("transition-slide"),P=d("link-assistant-phrase-editor");return l(),h("div",Ls,[r("div",Cs,[e.showEditor!==o.rowIndex?(l(),h("div",Bs,[r("div",{class:"editable-phrase first-phrase",onClick:s[4]||(s[4]=p=>n.openEditor(o.rowIndex,0))},[o.linkSuggestion&&n.showingMorePhrases&&o.suggestionType!=="suggestionsOutbound"?(l(),h("input",{key:0,type:"radio",checked:e.selectedPhrase===0,onClick:s[0]||(s[0]=$(p=>e.selectedPhrase=0,["stop"]))},null,8,Ms)):g("",!0),c(w,{url:n.tooltipUrl(o.row,n.phrases[0]),phrase:n.phrases[0].phrase,phraseHtml:n.phrases[0].phrase_html,anchor:n.phrases[0].anchor,class:C({hover:e.hoveringOver===0}),onMouseOver:s[2]||(s[2]=p=>e.hoveringOver=0),onMouseLeave:s[3]||(s[3]=p=>e.hoveringOver=-1)},{icons:f(()=>[r("span",Es,[c(k),o.domainsReport?(l(),y(m,{key:0,onClick:s[1]||(s[1]=p=>n.deleteLink(p,o.rowIndex,0))})):g("",!0)])]),_:1},8,["url","phrase","phraseHtml","anchor","class"])]),o.suggestionType!=="suggestionsOutbound"&&1<n.phrases.length&&e.showEditor!==o.rowIndex?(l(),h("div",Os,[r("a",{href:"#",onClick:s[5]||(s[5]=$(p=>{t.$emit("toggleShowMorePhrases",o.rowIndex),e.selectedPhrase=0},["prevent"]))},[r("div",null,u(n.viewMorePhrasesLabel),1),c(b,{class:C({rotated:n.showingMorePhrases})},null,8,["class"])])])):g("",!0),c(_,{class:"phrases-list",tag:"div",active:n.showingMorePhrases&&o.suggestionType!=="suggestionsOutbound"},{default:f(()=>[(l(!0),h(Q,null,X(n.phrases,(p,v)=>(l(),h("div",{class:"editable-phrase-container",key:v},[v?(l(),h("div",{key:0,class:"editable-phrase selectable-phrase",onClick:a=>n.openEditor(o.rowIndex,v)},[o.linkSuggestion&&n.showingMorePhrases?(l(),h("input",{key:0,type:"radio",checked:v===e.selectedPhrase,onClick:$(a=>e.selectedPhrase=v,["stop"])},null,8,xs)):g("",!0),c(w,{url:n.tooltipUrl(o.row,n.phrases[0]),phrase:p.phrase,phraseHtml:p.phrase_html,anchor:p.anchor,class:C({hover:v===e.hoveringOver}),onMouseOver:a=>e.hoveringOver=v,onMouseLeave:s[6]||(s[6]=a=>e.hoveringOver=-1)},{icons:f(()=>[r("div",Hs,[c(k),o.domainsReport?(l(),y(m,{key:0,onClick:a=>n.deleteLink(a,o.rowIndex,v)},null,8,["onClick"])):g("",!0)])]),_:2},1032,["url","phrase","phraseHtml","anchor","class","onMouseOver"])],8,Ds)):g("",!0)]))),128))]),_:1},8,["active"])])):g("",!0),e.showEditor===o.rowIndex?(l(),y(P,{key:1,ref:"linkEditor",modelValue:n.phrases[this.phraseIndex].phrase,phrase:n.phrases[this.phraseIndex].phrase_html,url:n.url,context:n.phraseContext,onSaveEditor:n.processModifiedPhrase,onCloseEditor:s[7]||(s[7]=p=>{e.showEditor=-1,e.hoveringOver=-1})},null,8,["modelValue","phrase","url","context","onSaveEditor"])):g("",!0)])])}const lt=T(Ts,[["render",qs]]),Ns={},Us={viewBox:"0.1 0.43 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-cornerstone-content"},Ys=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M2.31673 12.0587V6.40873H3.53342V12.0587H2.31673ZM6.46312 12.0587V6.40873H7.67038V12.0587H6.46312ZM0.0979004 14.1624V12.842H13.9117V14.1624H0.0979004ZM10.4667 12.0587V6.40873H11.6834V12.0587H10.4667ZM0.0979004 5.62542V4.3464L7.00008 0.43335L13.9117 4.3464V5.62542H0.0979004ZM2.93417 4.29568H11.066L7.00008 1.95077L2.93417 4.29568Z"},null,-1),Fs=[Ys];function Vs(t,s){return l(),h("svg",Us,Fs)}const Ks=T(Ns,[["render",Vs]]);const zs={components:{CoreTooltip:q,SvgCornerstoneContent:Ks},data(){return{strings:{description:this.$t.sprintf(this.$t.__("Cornerstone content refers to the most important and informative articles or pages on your website that serve as the foundation for your content strategy. AIOSEO uses cornerstone content for internal linking recommendations in Link Assistant. %1$s",this.$tdPro),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"cornerstoneContent",!0))}}}},Zs=["innerHTML"];function Ws(t,s,o,i,e,n){const k=d("svg-cornerstone-content"),m=d("core-tooltip");return l(),y(m,{class:"aioseo-cornerstone-content-tooltip"},{tooltip:f(()=>[r("span",{innerHTML:e.strings.description},null,8,Zs)]),default:f(()=>[c(k)]),_:1})}const at=T(zs,[["render",Ws]]);const Gs={setup(){const{strings:t,bulkOptions:s}=it();return{settingsStore:D(),composableStrings:t,bulkOptions:s}},components:{CoreAlert:j,CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantEditablePhrase:lt,SvgCirclePlus:ot,SvgLinkExternal:N,CornerstoneContentTooltip:at},mixins:[W,rt,H],data(){return{tableId:"aioseo-post-report-inbound-suggestions",suggestionType:"suggestionsInbound",isPostPublished:!1,strings:O(this.composableStrings,{dismissAllSuggestions:this.$t.sprintf(this.$t.__("Dismiss All %1$s Suggestions",this.$tdPro),this.$t.__("Inbound Internal",this.$tdPro)),noSuggestions:this.$t.sprintf(this.$t.__("You currently don't have any %1$s Suggestions!",this.$tdPro),this.$t.__("Inbound Internal",this.$tdPro)),unpublishedPost:this.$t.__("This post has not been published yet. You must publish the post before inbound link suggestions can be generated.",this.$tdPro)})}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"spacer",width:"30px"},{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"add_link",width:"150px"}]},seeAllSuggestions(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Suggestions",this.$tdPro),this.post.links.suggestionsInbound.totals.total,this.$t.__("Inbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}},beforeMount(){if(this.post.isPostEditor){const t=wt();this.isPostPublished=t&&t==="publish"}}},Js={class:"aioseo-link-suggestions-Inbound"},js=["href"],Qs={class:"row-actions"},Xs={class:"view"},te=["href"],se={class:"edit"},ee=["href"],oe={class:"dismiss"},ne=["onClick"],ie=["onClick"],re={key:1,class:"links-bottom"},le={class:"links-bottom-left"},ae={key:0},de={class:"links-bottom-right"};function ue(t,s,o,i,e,n){var v,a;const k=d("core-alert"),m=d("cornerstone-content-tooltip"),w=d("link-assistant-editable-phrase"),b=d("svg-circle-plus"),_=d("core-wp-table"),P=d("svg-link-external"),p=d("link-assistant-confirmation-modal");return l(),h("div",Js,[t.post.post_status&&((v=t.post)==null?void 0:v.post_status)!=="publish"||(a=t.post)!=null&&a.isPostEditor&&!e.isPostPublished?(l(),y(k,{key:0,class:"unpublished-post-alert",type:"yellow"},{default:f(()=>[r("span",null,u(e.strings.unpublishedPost),1)]),_:1})):g("",!0),(l(),y(_,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.suggestionsInbound.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:A})=>[r("strong",null,[r("a",{class:"edit-link",href:A.context.permalink,target:"_blank"},u(A.context.postTitle),9,js),A.context.isCornerstoneContent?(l(),y(m,{key:0})):g("",!0)]),r("div",Qs,[r("span",Xs,[r("a",{href:A.context.permalink,target:"_blank"},u(t.viewPost(A.context.postType.singular)),9,te),S(" | ")]),r("span",se,[r("a",{href:A.context.editLink,target:"_blank"},u(t.editPost(A.context.postType.singular)),9,ee),S(" | ")]),r("span",oe,[r("a",{href:"#",onClick:$(E=>t.maybeDoBulkAction({action:"dismiss",selectedRows:A}),["prevent"])},u(e.strings.dismiss),9,ne)])])]),phrase:f(({row:A,index:E})=>[c(w,{ref:"editablePhrase"+E,row:A,rowIndex:E,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,linkSuggestion:"",onHidePhrases:s[0]||(s[0]=dt=>{t.activeSuggestionRow=-1}),onToggleShowMorePhrases:t.toggleShowMorePhrases,onSaveModifiedPhrase:t.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),add_link:f(({row:A,index:E})=>[r("div",{class:"add-link",onClick:$(dt=>t.addLink(A,E),["prevent"])},[c(b),r("a",null,u(e.strings.addLink),1)],8,ie)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",re,[r("div",le,[t.post.links.suggestionsInbound.totals.total>5&&t.linksReport?(l(),h("div",ae,[c(P),r("a",{class:"link-view",href:"#",onClick:s[1]||(s[1]=$(A=>t.openPostReport("link-suggestions","suggestions-inbound"),["prevent"]))},u(n.seeAllSuggestions),1)])):g("",!0)]),r("div",de,[t.post.links.suggestionsInbound.rows.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[2]||(s[2]=$(A=>t.maybeDoBulkAction({action:"dismiss",selectedRows:"all"}),["prevent"]))},u(e.strings.dismissAllSuggestions),1)):g("",!0)])])),c(p,{show:t.showModal,strings:t.modalStrings,selectedRows:t.selectedRows,onCloseModal:s[3]||(s[3]=A=>t.showModal=!1),onDoBulkAction:t.doBulkAction},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const pe=T(Gs,[["render",ue]]);const he={emits:["toggleShowMorePhrases","postTitleIndexChanged"],components:{SvgCaret:st,TransitionSlide:et,CornerstoneContentTooltip:at},mixins:[W],props:{row:{type:Object,required:!0},rowIndex:{type:Number,default:0},activeRow:{type:Number,default:-1},postIndex:{type:Number,required:!1},suggestionType:{type:String,required:!1}},data(){return{selectedPostTitleIndex:-1,hoveringOver:-1}},computed:{postTitles(){const t=[];return this.row.suggestions.forEach(s=>{t.includes[s.context.postTitle]||t.push(s.context.postTitle)}),t.slice(0,10)},showingMorePostTitles(){return 1<this.postTitles.length&&this.activeRow===this.rowIndex},viewMorePostTitlesLabel(){const t=1<this.postTitles.length?this.postTitles.length-1:0;return this.$t.sprintf(this.$t._n("%1$d more post","%1$d more posts",t,this.$tdPro),t)}},methods:{selectDifferentPostTitle(t){this.selectedPostTitleIndex!==t&&(this.selectedPostTitleIndex=t,this.$emit("postTitleIndexChanged",t))}}},ge={class:"aioseo-post-title-selector"},ce=["checked"],ke={class:"post-title-text"},me={class:"view"},fe=["href"],_e={class:"edit"},be=["href"],we={key:0,class:"show-more-post-titles"},ve=["onMouseover"],Pe=["checked","onClick"],ye={class:"post-title-text"},$e={class:"view"},Se=["href"],Ae={class:"edit"},Re=["href"];function Ie(t,s,o,i,e,n){const k=d("cornerstone-content-tooltip"),m=d("svg-caret"),w=d("transition-slide");return l(),h("div",ge,[r("div",{class:"post-title first-post-title",onMouseover:s[1]||(s[1]=b=>e.hoveringOver=0),onMouseleave:s[2]||(s[2]=b=>e.hoveringOver=-1)},[n.showingMorePostTitles?(l(),h("input",{key:0,type:"radio",checked:e.selectedPostTitleIndex===0,onClick:s[0]||(s[0]=$(b=>n.selectDifferentPostTitle(0),["stop"]))},null,8,ce)):g("",!0),r("span",ke,[S(u(n.postTitles[0])+" ",1),o.row.suggestions[0].context.isCornerstoneContent?(l(),y(k,{key:0})):g("",!0)]),r("div",{class:C(["row-actions",{hover:e.hoveringOver===0}])},[r("span",me,[r("a",{href:o.row.suggestions[0].context.permalink,target:"_blank"},u(t.viewPost(o.row.suggestions[0].context.postType.singular)),9,fe),S(" | ")]),r("span",_e,[r("a",{href:o.row.suggestions[0].context.editLink,target:"_blank"},u(t.editPost(o.row.suggestions[0].context.postType.singular)),9,be)])],2)],32),1<n.postTitles.length?(l(),h("div",we,[r("a",{href:"#",onClick:s[3]||(s[3]=$(b=>{t.$emit("toggleShowMorePhrases",o.rowIndex),n.selectDifferentPostTitle(0)},["prevent"]))},[r("div",null,u(n.viewMorePostTitlesLabel),1),c(m,{class:C({rotated:n.showingMorePostTitles})},null,8,["class"])])])):g("",!0),c(w,{class:"post-titles-list",tag:"div",active:n.showingMorePostTitles},{default:f(()=>[(l(!0),h(Q,null,X(n.postTitles,(b,_)=>(l(),h("div",{class:"post-title post-title-container",key:_},[_?(l(),h("div",{key:0,class:"selectable-post-title",onMouseover:P=>e.hoveringOver=_,onMouseleave:s[4]||(s[4]=P=>e.hoveringOver=-1)},[n.showingMorePostTitles?(l(),h("input",{key:0,type:"radio",checked:_===e.selectedPostTitleIndex,onClick:$(P=>n.selectDifferentPostTitle(_),["stop"])},null,8,Pe)):g("",!0),r("span",ye,[S(u(n.postTitles[_])+" ",1),o.row.suggestions[_].context.isCornerstoneContent?(l(),y(k,{key:0})):g("",!0)]),r("div",{class:C(["row-actions",{hover:_===e.hoveringOver}])},[r("span",$e,[r("a",{href:o.row.suggestions[_].context.permalink,target:"_blank"},u(t.viewPost(o.row.suggestions[_].context.postType.singular)),9,Se),S(" | ")]),r("span",Ae,[r("a",{href:o.row.suggestions[_].context.editLink,target:"_blank"},u(t.editPost(o.row.suggestions[_].context.postType.singular)),9,Re)])],2)],40,ve)):g("",!0)]))),128))]),_:1},8,["active"])])}const Te=T(he,[["render",Ie]]),Le={setup(){const{strings:t,bulkOptions:s}=it();return{settingsStore:D(),composableStrings:t,bulkOptions:s}},components:{CoreWpTable:x,LinkAssistantConfirmationModal:U,LinkAssistantEditablePhrase:lt,LinkAssistantPostTitleSelector:Te,SvgCirclePlus:ot,SvgLinkExternal:N},mixins:[rt,H],data(){return{tableId:"aioseo-post-report-outbound-suggestions",suggestionType:"suggestionsOutbound",selectedPostTitleIndex:0,strings:O(this.composableStrings,{dismissAllSuggestions:this.$t.sprintf(this.$t.__("Dismiss All %1$s Suggestions",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro)),noSuggestions:this.$t.sprintf(this.$t.__("You currently don't have any %1$s Suggestions!",this.$tdPro),this.$t.__("Outbound Internal",this.$tdPro))})}},computed:{columns(){return[{slug:"phrase",label:this.$t.__("Phrase",this.$tdPro)},{slug:"spacer",width:"30px"},{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"add_link",width:"150px"}]},seeAllSuggestions(){return this.$t.sprintf(this.$t.__("See All %1$s %2$s Suggestions",this.$tdPro),this.post.links.suggestionsOutbound.totals.total,this.$t.__("Outbound Internal",this.$tdPro))}},methods:{processPagination(t){this.pageNumber=t,!this.metabox&&(this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1))}}},Ce={class:"aioseo-link-suggestions-outbound"},Be={class:"row-actions"},Me={class:"dismiss"},Ee=["onClick"],Oe=["onClick"],De={key:0,class:"links-bottom"},xe={class:"links-bottom-left"},He={key:0},qe={class:"links-bottom-right"};function Ne(t,s,o,i,e,n){const k=d("link-assistant-post-title-selector"),m=d("link-assistant-editable-phrase"),w=d("svg-circle-plus"),b=d("core-wp-table"),_=d("svg-link-external"),P=d("link-assistant-confirmation-modal");return l(),h("div",Ce,[(l(),y(b,{"bulk-options":i.bulkOptions,class:C({"link-assistant-inner-table":!t.postReport}),columns:n.columns,id:e.tableId,"initial-items-per-page":i.settingsStore.settings.tablePagination.linkAssistantPostsReport,"initial-page-number":t.pageNumber,key:t.wpTableKey,loading:t.wpTableLoading,rows:t.rows,"show-pagination":!t.linksReport,"show-search":!1,"show-table-footer":t.postReport,totals:t.post.links.suggestionsOutbound.totals,"show-items-per-page":"",onPaginate:n.processPagination,onProcessBulkAction:t.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage},{post_title:f(({row:p,index:v})=>[c(k,{ref:"postTitleSelector"+v,row:p,rowIndex:v,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,linkSuggestion:"",onHidePhrases:s[0]||(s[0]=a=>{t.activeSuggestionRow=-1}),onToggleShowMorePhrases:t.toggleShowMorePhrases,onSaveModifiedPhrase:t.saveModifiedPhrase,onPostTitleIndexChanged:s[1]||(s[1]=a=>e.selectedPostTitleIndex=a)},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),phrase:f(({row:p,index:v})=>[c(m,{row:p,rowIndex:v,activeRow:t.activeSuggestionRow,postIndex:t.postIndex,suggestionType:e.suggestionType,selectedPostTitleIndex:e.selectedPostTitleIndex,linkSuggestion:"",onHidePhrases:s[2]||(s[2]=a=>{t.activeSuggestionRow=-1}),onSaveModifiedPhrase:t.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","postIndex","suggestionType","selectedPostTitleIndex","onSaveModifiedPhrase"]),r("div",Be,[r("span",Me,[r("a",{href:"#",onClick:$(a=>t.maybeDoBulkAction({action:"dismiss",selectedRows:p}),["prevent"])},u(e.strings.dismiss),9,Ee)])])]),add_link:f(({row:p,index:v})=>[r("div",{class:"add-link",onClick:$(a=>t.addLink(p,v),["prevent"])},[c(w),r("a",null,u(e.strings.addLink),1)],8,Oe)]),_:1},8,["bulk-options","class","columns","id","initial-items-per-page","initial-page-number","loading","rows","show-pagination","show-table-footer","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage"])),t.postReport?g("",!0):(l(),h("div",De,[r("div",xe,[t.post.links.suggestionsOutbound.totals.total>5&&t.linksReport?(l(),h("div",He,[c(_),r("a",{class:"link-view",href:"#",onClick:s[3]||(s[3]=$(p=>t.openPostReport("link-suggestions","suggestions-outbound"),["prevent"]))},u(n.seeAllSuggestions),1)])):g("",!0)]),r("div",qe,[t.filteredSuggestionsOutbound.length?(l(),h("a",{key:0,class:"link-delete",onClick:s[4]||(s[4]=$(p=>t.maybeDoBulkAction({action:"dismiss",selectedRows:"all"}),["prevent"]))},u(e.strings.dismissAllSuggestions),1)):g("",!0)])])),c(P,{show:t.showModal,strings:t.modalStrings,selectedRows:t.selectedRows,onCloseModal:s[5]||(s[5]=p=>t.showModal=!1),onDoBulkAction:t.doBulkAction},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const Ue=T(Le,[["render",Ne]]);const Ye={setup(){const{strings:t,modalStrings:s,bulkOptions:o}=F();return{linkAssistantStore:L(),bulkOptions:o,modalStrings:s,composableStrings:t}},emits:["linksUpdated","suggestionsTabChanged"],components:{CoreAlert:j,CoreMainTabs:kt,Inbound:pe,Outbound:Ue,SvgLinkInternalInbound:pt,SvgLinkInternalOutbound:ht},mixins:[V],props:{filteredSuggestionsOutbound:{type:Array,required:!0},initialTab:{type:String,required:!1},showAlert:{type:Boolean,default(){return!1}}},data(){return{tabsKey:0,activeTab:"suggestions-inbound",strings:O(this.composableStrings,{description:this.$t.sprintf(this.$t.__("Below you can add inbound and outbound internal links based on %1$s's smart suggestions. These suggestions are generated in the background, which requires some time to complete. %2$s",this.$tdPro),"AIOSEO",this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"linkAssistant",!0))})}},computed:{tabs(){return[{slug:"suggestions-inbound",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.metabox||this.postReport?this.post.links.suggestionsInbound.totals.total:this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsInbound,this.$t.__("Inbound Internal Suggestions",this.$tdPro))},{slug:"suggestions-outbound",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.metabox||this.postReport?this.filteredSuggestionsOutbound.length:this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsOutbound,this.$t.__("Outbound Internal Suggestions",this.$tdPro))}]}},methods:{processChangeTab(t){this.activeTab=t,this.$emit("suggestionsTabChanged",t)},dismissAlert(){this.linkAssistantStore.internalOptions.internal.dismissedAlerts.suggestions=!0,ut.get(this.$links.restUrl("link-assistant/data/dismiss-alert")).catch(t=>console.error("Could not dismiss suggestions alert:",t))}},beforeMount(){this.initialTab&&(this.activeTab=this.initialTab),this.linkAssistantStore.setLinksReportCounts()}},Fe={class:"aioseo-link-suggestions"},Ve=["innerHTML"],Ke={class:"link-suggestions-container"};function ze(t,s,o,i,e,n){const k=d("core-alert"),m=d("core-main-tabs"),w=d("outbound"),b=d("inbound");return l(),h("div",Fe,[i.linkAssistantStore.internalOptions.internal.dismissedAlerts.suggestions?g("",!0):(l(),y(k,{key:0,class:"description",type:"blue","show-close":"",onCloseAlert:n.dismissAlert},{default:f(()=>[r("span",{innerHTML:e.strings.description},null,8,Ve)]),_:1},8,["onCloseAlert"])),(l(),y(m,{internal:"",key:e.tabsKey,tabs:n.tabs,active:e.activeTab,showSaveButton:!1,onChanged:n.processChangeTab},{"var-tab-icon":f(({tab:_})=>[(l(),y(ct(_.icon),{class:C([{warning:_.warning}])},null,8,["class"]))]),_:1},8,["tabs","active","onChanged"])),r("div",Ke,[e.activeTab==="suggestions-outbound"?(l(),y(w,{key:0,post:t.post,postIndex:t.postIndex,postId:t.postId,filteredSuggestionsOutbound:o.filteredSuggestionsOutbound,linksReport:t.linksReport,postReport:t.postReport,metabox:t.metabox,onLinksUpdated:s[0]||(s[0]=_=>{e.tabsKey++,t.$emit("linksUpdated")})},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","linksReport","postReport","metabox"])):g("",!0),e.activeTab==="suggestions-inbound"?(l(),y(b,{key:1,post:t.post,postIndex:t.postIndex,postId:t.postId,linksReport:t.linksReport,postReport:t.postReport,metabox:t.metabox,onLinksUpdated:s[1]||(s[1]=_=>{e.tabsKey++,t.$emit("linksUpdated")})},null,8,["post","postIndex","postId","linksReport","postReport","metabox"])):g("",!0)])])}const mo=T(Ye,[["render",ze]]);export{U as L,po as S,lt as a,ho as b,go as c,co as d,ko as e,mo as f,wt as g};
